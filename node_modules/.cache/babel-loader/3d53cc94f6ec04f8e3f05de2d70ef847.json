{"ast":null,"code":"import _slicedToArray from\"C:/Users/Diego/metaplex/js/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useColorMode}from\"../contexts/ColorModeContext\";import{jsx as _jsx}from\"react/jsx-runtime\";export var DragAndDrop=function DragAndDrop(props){var dropRef=React.useRef(null);var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),dragCounter=_React$useState2[0],setDragCounter=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),dragging=_React$useState4[0],setDragging=_React$useState4[1];var handleDrag=function handleDrag(e){e.preventDefault();e.stopPropagation();};var handleDragIn=function handleDragIn(e){e.preventDefault();e.stopPropagation();setDragCounter(dragCounter+1);if(e.dataTransfer.items&&e.dataTransfer.items.length>0){setDragging(true);}};var handleDragOut=function handleDragOut(e){e.preventDefault();e.stopPropagation();var remainingDrags=dragCounter-1;setDragCounter(remainingDrags);if(remainingDrags===0){setDragging(false);}};var handleDrop=function handleDrop(e){e.preventDefault();e.stopPropagation();setDragging(false);if(e.dataTransfer.files&&e.dataTransfer.files.length>0){props.handleDrop(e.dataTransfer.files);e.dataTransfer.clearData();setDragCounter(0);}};React.useEffect(function(){var node=dropRef.current;if(node===null)return;node.addEventListener(\"dragenter\",handleDragIn);node.addEventListener(\"dragleave\",handleDragOut);node.addEventListener(\"dragover\",handleDrag);node.addEventListener(\"drop\",handleDrop);return function(){node.removeEventListener(\"dragenter\",handleDragIn);node.removeEventListener(\"dragleave\",handleDragOut);node.removeEventListener(\"dragover\",handleDrag);node.removeEventListener(\"drop\",handleDrop);};});var colorModeCtx=useColorMode();var shade=colorModeCtx.mode==='dark'?\"rgba(255,255,255,.1)\":\"rgba(0, 0, 0,.1)\";return/*#__PURE__*/_jsx(\"div\",{ref:dropRef,style:dragging?{backgroundColor:shade}:{},children:props.children});};export default DragAndDrop;","map":{"version":3,"sources":["C:/Users/Diego/metaplex/js/packages/gumdrop/src/components/DragAndDrop.tsx"],"names":["React","useColorMode","DragAndDrop","props","dropRef","useRef","useState","dragCounter","setDragCounter","dragging","setDragging","handleDrag","e","preventDefault","stopPropagation","handleDragIn","dataTransfer","items","length","handleDragOut","remainingDrags","handleDrop","files","clearData","useEffect","node","current","addEventListener","removeEventListener","colorModeCtx","shade","mode","backgroundColor","children"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport {\r\n  useColorMode,\r\n} from \"../contexts/ColorModeContext\";\r\n\r\nexport const DragAndDrop = (\r\n  props : {\r\n    handleDrop : (files : FileList) => void,\r\n    children : React.ReactNode,\r\n  },\r\n) => {\r\n  const dropRef = React.useRef<HTMLDivElement>(null);\r\n  const [dragCounter, setDragCounter] = React.useState(0);\r\n  const [dragging, setDragging] = React.useState(false);\r\n\r\n  const handleDrag = (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n  };\r\n\r\n  const handleDragIn = (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    setDragCounter(dragCounter + 1);\r\n    if (e.dataTransfer.items && e.dataTransfer.items.length > 0) {\r\n      setDragging(true);\r\n    }\r\n  };\r\n\r\n  const handleDragOut = (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    const remainingDrags = dragCounter - 1;\r\n    setDragCounter(remainingDrags);\r\n    if (remainingDrags === 0) {\r\n      setDragging(false);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n\r\n    setDragging(false);\r\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n      props.handleDrop(e.dataTransfer.files);\r\n      e.dataTransfer.clearData();\r\n      setDragCounter(0);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const node = dropRef.current;\r\n    if (node === null) return;\r\n    node.addEventListener(\"dragenter\" , handleDragIn);\r\n    node.addEventListener(\"dragleave\" , handleDragOut);\r\n    node.addEventListener(\"dragover\"  , handleDrag);\r\n    node.addEventListener(\"drop\"      , handleDrop);\r\n\r\n    return () => {\r\n      node.removeEventListener(\"dragenter\" , handleDragIn);\r\n      node.removeEventListener(\"dragleave\" , handleDragOut);\r\n      node.removeEventListener(\"dragover\"  , handleDrag);\r\n      node.removeEventListener(\"drop\"      , handleDrop);\r\n    };\r\n  });\r\n\r\n  const colorModeCtx = useColorMode();\r\n  const shade = colorModeCtx.mode === 'dark' ? \"rgba(255,255,255,.1)\" : \"rgba(0, 0, 0,.1)\";\r\n\r\n  return (\r\n    <div\r\n      ref={dropRef}\r\n      style={dragging ? { backgroundColor: shade} : {}}\r\n    >\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nexport default DragAndDrop;\r\n"]},"metadata":{},"sourceType":"module"}