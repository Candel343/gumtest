{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useStore = exports.StoreProvider = exports.StoreContext = void 0;\n\nconst react_1 = __importStar(require(\"react\"));\n\nconst utils_1 = require(\"../utils\");\n\nconst hooks_1 = require(\"../hooks\");\n\nexports.StoreContext = react_1.createContext(null);\n\nconst StoreProvider = ({\n  children,\n  ownerAddress,\n  storeAddress\n}) => {\n  const searchParams = hooks_1.useQuerySearch();\n  const ownerAddressFromQuery = searchParams.get('store');\n  const initOwnerAddress = ownerAddressFromQuery || ownerAddress;\n  const initStoreAddress = !ownerAddressFromQuery ? storeAddress : undefined;\n  const isConfigured = Boolean(initStoreAddress || initOwnerAddress);\n  const [store, setStore] = react_1.useState({\n    storeAddress: initStoreAddress,\n    isReady: Boolean(!initOwnerAddress || initStoreAddress)\n  });\n  const setStoreForOwner = react_1.useMemo(() => async ownerAddress => {\n    const storeAddress = await utils_1.getStoreID(ownerAddress);\n    utils_1.setProgramIds(storeAddress); // fallback\n\n    setStore({\n      storeAddress,\n      isReady: true\n    });\n    console.log(`CUSTOM STORE: ${storeAddress}`);\n    return storeAddress;\n  }, []);\n  react_1.useEffect(() => {\n    console.log(`STORE_OWNER_ADDRESS: ${initOwnerAddress}`);\n\n    if (initOwnerAddress && !initStoreAddress) {\n      setStoreForOwner(initOwnerAddress);\n    } else {\n      utils_1.setProgramIds(initStoreAddress); // fallback\n\n      console.log(`CUSTOM STORE FROM ENV: ${initStoreAddress}`);\n    }\n  }, [initOwnerAddress]);\n  return react_1.default.createElement(exports.StoreContext.Provider, {\n    value: { ...store,\n      setStoreForOwner,\n      isConfigured\n    }\n  }, children);\n};\n\nexports.StoreProvider = StoreProvider;\n\nconst useStore = () => {\n  return react_1.useContext(exports.StoreContext);\n};\n\nexports.useStore = useStore;","map":{"version":3,"sources":["../../../src/contexts/store.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAA,OAAA,GAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AAQA,MAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,MAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AAaa,OAAA,CAAA,YAAA,GAAe,OAAA,CAAA,aAAA,CAA2B,IAA3B,CAAf;;AAEN,MAAM,aAAa,GAGrB,CAAC;AAAE,EAAA,QAAF;AAAY,EAAA,YAAZ;AAA0B,EAAA;AAA1B,CAAD,KAA6C;AAChD,QAAM,YAAY,GAAG,OAAA,CAAA,cAAA,EAArB;AACA,QAAM,qBAAqB,GAAG,YAAY,CAAC,GAAb,CAAiB,OAAjB,CAA9B;AAEA,QAAM,gBAAgB,GAAG,qBAAqB,IAAI,YAAlD;AACA,QAAM,gBAAgB,GAAG,CAAC,qBAAD,GAAyB,YAAzB,GAAwC,SAAjE;AACA,QAAM,YAAY,GAAG,OAAO,CAAC,gBAAgB,IAAI,gBAArB,CAA5B;AAEA,QAAM,CAAC,KAAD,EAAQ,QAAR,IAAoB,OAAA,CAAA,QAAA,CAExB;AACA,IAAA,YAAY,EAAE,gBADd;AAEA,IAAA,OAAO,EAAE,OAAO,CAAC,CAAC,gBAAD,IAAqB,gBAAtB;AAFhB,GAFwB,CAA1B;AAOA,QAAM,gBAAgB,GAAG,OAAA,CAAA,OAAA,CACvB,MAAM,MAAO,YAAP,IAAgC;AACpC,UAAM,YAAY,GAAG,MAAM,OAAA,CAAA,UAAA,CAAW,YAAX,CAA3B;AACA,IAAA,OAAA,CAAA,aAAA,CAAc,YAAd,EAFoC,CAEP;;AAC7B,IAAA,QAAQ,CAAC;AAAE,MAAA,YAAF;AAAgB,MAAA,OAAO,EAAE;AAAzB,KAAD,CAAR;AACA,IAAA,OAAO,CAAC,GAAR,CAAY,iBAAiB,YAAY,EAAzC;AACA,WAAO,YAAP;AACD,GAPsB,EAQvB,EARuB,CAAzB;AAWA,EAAA,OAAA,CAAA,SAAA,CAAU,MAAK;AACb,IAAA,OAAO,CAAC,GAAR,CAAY,wBAAwB,gBAAgB,EAApD;;AACA,QAAI,gBAAgB,IAAI,CAAC,gBAAzB,EAA2C;AACzC,MAAA,gBAAgB,CAAC,gBAAD,CAAhB;AACD,KAFD,MAEO;AACL,MAAA,OAAA,CAAA,aAAA,CAAc,gBAAd,EADK,CAC4B;;AACjC,MAAA,OAAO,CAAC,GAAR,CAAY,0BAA0B,gBAAgB,EAAtD;AACD;AACF,GARD,EAQG,CAAC,gBAAD,CARH;AAUA,SACE,OAAA,CAAA,OAAA,CAAA,aAAA,CAAC,OAAA,CAAA,YAAA,CAAa,QAAd,EAAsB;AAAC,IAAA,KAAK,EAAE,EAAE,GAAG,KAAL;AAAY,MAAA,gBAAZ;AAA8B,MAAA;AAA9B;AAAR,GAAtB,EACG,QADH,CADF;AAKD,CA5CM;;AAAM,OAAA,CAAA,aAAA,GAAa,aAAb;;AA8CN,MAAM,QAAQ,GAAG,MAAK;AAC3B,SAAO,OAAA,CAAA,UAAA,CAAW,OAAA,CAAA,YAAX,CAAP;AACD,CAFM;;AAAM,OAAA,CAAA,QAAA,GAAQ,QAAR","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.useStore = exports.StoreProvider = exports.StoreContext = void 0;\r\nconst react_1 = __importStar(require(\"react\"));\r\nconst utils_1 = require(\"../utils\");\r\nconst hooks_1 = require(\"../hooks\");\r\nexports.StoreContext = react_1.createContext(null);\r\nconst StoreProvider = ({ children, ownerAddress, storeAddress }) => {\r\n    const searchParams = hooks_1.useQuerySearch();\r\n    const ownerAddressFromQuery = searchParams.get('store');\r\n    const initOwnerAddress = ownerAddressFromQuery || ownerAddress;\r\n    const initStoreAddress = !ownerAddressFromQuery ? storeAddress : undefined;\r\n    const isConfigured = Boolean(initStoreAddress || initOwnerAddress);\r\n    const [store, setStore] = react_1.useState({\r\n        storeAddress: initStoreAddress,\r\n        isReady: Boolean(!initOwnerAddress || initStoreAddress),\r\n    });\r\n    const setStoreForOwner = react_1.useMemo(() => async (ownerAddress) => {\r\n        const storeAddress = await utils_1.getStoreID(ownerAddress);\r\n        utils_1.setProgramIds(storeAddress); // fallback\r\n        setStore({ storeAddress, isReady: true });\r\n        console.log(`CUSTOM STORE: ${storeAddress}`);\r\n        return storeAddress;\r\n    }, []);\r\n    react_1.useEffect(() => {\r\n        console.log(`STORE_OWNER_ADDRESS: ${initOwnerAddress}`);\r\n        if (initOwnerAddress && !initStoreAddress) {\r\n            setStoreForOwner(initOwnerAddress);\r\n        }\r\n        else {\r\n            utils_1.setProgramIds(initStoreAddress); // fallback\r\n            console.log(`CUSTOM STORE FROM ENV: ${initStoreAddress}`);\r\n        }\r\n    }, [initOwnerAddress]);\r\n    return (react_1.default.createElement(exports.StoreContext.Provider, { value: { ...store, setStoreForOwner, isConfigured } }, children));\r\n};\r\nexports.StoreProvider = StoreProvider;\r\nconst useStore = () => {\r\n    return react_1.useContext(exports.StoreContext);\r\n};\r\nexports.useStore = useStore;\r\n//# sourceMappingURL=store.js.map"]},"metadata":{},"sourceType":"script"}