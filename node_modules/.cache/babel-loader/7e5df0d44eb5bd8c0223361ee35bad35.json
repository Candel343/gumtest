{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __exportStar = this && this.__exportStar || function (m, exports) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Store = exports.WhitelistedCreator = exports.decodePayoutTicket = exports.decodeSafetyDepositConfig = exports.decodeBidRedemptionTicket = exports.decodeAuctionManager = exports.decodeStore = exports.WhitelistedCreatorParser = exports.decodeWhitelistedCreator = exports.decodePrizeTrackingTicket = exports.decodeAuctionCache = exports.decodeStoreIndexer = exports.WinningConfigType = exports.NonWinningConstraint = exports.WinningConstraint = exports.SetAuctionCacheArgs = exports.SetStoreIndexArgs = exports.RedeemParticipationBidV3Args = exports.WithdrawMasterEditionArgs = exports.RedeemPrintingV2BidArgs = exports.DecommissionAuctionManagerArgs = exports.SetWhitelistedCreatorArgs = exports.SetStoreArgs = exports.EmptyPaymentAccountArgs = exports.RedeemUnusedWinningConfigItemsAsAuctioneerArgs = exports.ProxyCallAddress = exports.ClaimBidArgs = exports.EndAuctionArgs = exports.StartAuctionArgs = exports.RedeemFullRightsTransferBidArgs = exports.RedeemBidArgs = exports.ParticipationConfigV2 = exports.ParticipationStateV2 = exports.AuctionManagerStateV2 = exports.AuctionManagerV2 = exports.AuctionManager = exports.AuctionCache = exports.StoreIndexer = exports.PayoutTicket = exports.PrizeTrackingTicket = exports.MetaplexKey = exports.MAX_PAYOUT_TICKET_SIZE = exports.MAX_WHITELISTED_CREATOR_SIZE = exports.MAX_PRIZE_TRACKING_TICKET_SIZE = exports.ORIGINAL_AUTHORITY_LOOKUP_SIZE = exports.MAX_INDEXED_ELEMENTS = exports.TOTALS = exports.CACHE = exports.INDEX = exports.METAPLEX_PREFIX = void 0;\nexports.getPayoutTicket = exports.getAuctionCache = exports.getStoreIndexer = exports.getSafetyDepositConfig = exports.getAuctionWinnerTokenTypeTracker = exports.getPrizeTrackingTicket = exports.getWhitelistedCreator = exports.isCreatorPartOfTheStore = exports.getOriginalAuthority = exports.getBidderKeys = exports.getBidRedemption = exports.getAuctionKeys = exports.getAuctionManagerKey = exports.SCHEMA = exports.ValidateSafetyDepositBoxV2Args = exports.SafetyDepositConfig = exports.InitAuctionManagerV2Args = exports.AmountRange = exports.TupleNumericType = exports.AuctionManagerStatus = exports.BidRedemptionTicketV2 = void 0;\n\nconst web3_js_1 = require(\"@solana/web3.js\");\n\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\n\nconst bs58_1 = __importDefault(require(\"bs58\"));\n\nconst borsh_1 = require(\"borsh\");\n\nconst actions_1 = require(\"../../actions\");\n\nconst utils_1 = require(\"../../utils\");\n\nconst deprecatedStates_1 = require(\"./deprecatedStates\");\n\n__exportStar(require(\"./deprecatedInitAuctionManagerV1\"), exports);\n\n__exportStar(require(\"./redeemBid\"), exports);\n\n__exportStar(require(\"./redeemFullRightsTransferBid\"), exports);\n\n__exportStar(require(\"./deprecatedRedeemParticipationBid\"), exports);\n\n__exportStar(require(\"./startAuction\"), exports);\n\n__exportStar(require(\"./deprecatedValidateSafetyDepositBoxV1\"), exports);\n\n__exportStar(require(\"./redeemParticipationBidV3\"), exports);\n\n__exportStar(require(\"./redeemPrintingV2Bid\"), exports);\n\n__exportStar(require(\"./withdrawMasterEdition\"), exports);\n\n__exportStar(require(\"./deprecatedStates\"), exports);\n\nexports.METAPLEX_PREFIX = 'metaplex';\nexports.INDEX = 'index';\nexports.CACHE = 'cache';\nexports.TOTALS = 'totals';\nexports.MAX_INDEXED_ELEMENTS = 100;\nexports.ORIGINAL_AUTHORITY_LOOKUP_SIZE = 33;\nexports.MAX_PRIZE_TRACKING_TICKET_SIZE = 1 + 32 + 8 + 8 + 8 + 50;\nexports.MAX_WHITELISTED_CREATOR_SIZE = 2 + 32 + 10;\nexports.MAX_PAYOUT_TICKET_SIZE = 1 + 32 + 8;\nvar MetaplexKey;\n\n(function (MetaplexKey) {\n  MetaplexKey[MetaplexKey[\"Uninitialized\"] = 0] = \"Uninitialized\";\n  MetaplexKey[MetaplexKey[\"OriginalAuthorityLookupV1\"] = 1] = \"OriginalAuthorityLookupV1\";\n  MetaplexKey[MetaplexKey[\"BidRedemptionTicketV1\"] = 2] = \"BidRedemptionTicketV1\";\n  MetaplexKey[MetaplexKey[\"StoreV1\"] = 3] = \"StoreV1\";\n  MetaplexKey[MetaplexKey[\"WhitelistedCreatorV1\"] = 4] = \"WhitelistedCreatorV1\";\n  MetaplexKey[MetaplexKey[\"PayoutTicketV1\"] = 5] = \"PayoutTicketV1\";\n  MetaplexKey[MetaplexKey[\"SafetyDepositValidationTicketV1\"] = 6] = \"SafetyDepositValidationTicketV1\";\n  MetaplexKey[MetaplexKey[\"AuctionManagerV1\"] = 7] = \"AuctionManagerV1\";\n  MetaplexKey[MetaplexKey[\"PrizeTrackingTicketV1\"] = 8] = \"PrizeTrackingTicketV1\";\n  MetaplexKey[MetaplexKey[\"SafetyDepositConfigV1\"] = 9] = \"SafetyDepositConfigV1\";\n  MetaplexKey[MetaplexKey[\"AuctionManagerV2\"] = 10] = \"AuctionManagerV2\";\n  MetaplexKey[MetaplexKey[\"BidRedemptionTicketV2\"] = 11] = \"BidRedemptionTicketV2\";\n  MetaplexKey[MetaplexKey[\"AuctionWinnerTokenTypeTrackerV1\"] = 12] = \"AuctionWinnerTokenTypeTrackerV1\";\n  MetaplexKey[MetaplexKey[\"StoreIndexerV1\"] = 13] = \"StoreIndexerV1\";\n  MetaplexKey[MetaplexKey[\"AuctionCacheV1\"] = 14] = \"AuctionCacheV1\";\n})(MetaplexKey = exports.MetaplexKey || (exports.MetaplexKey = {}));\n\nclass PrizeTrackingTicket {\n  constructor(args) {\n    this.key = MetaplexKey.PrizeTrackingTicketV1;\n    this.key = MetaplexKey.PrizeTrackingTicketV1;\n    this.metadata = args.metadata;\n    this.supplySnapshot = args.supplySnapshot;\n    this.expectedRedemptions = args.expectedRedemptions;\n    this.redemptions = args.redemptions;\n  }\n\n}\n\nexports.PrizeTrackingTicket = PrizeTrackingTicket;\n\nclass PayoutTicket {\n  constructor(args) {\n    this.key = MetaplexKey.PayoutTicketV1;\n    this.key = MetaplexKey.PayoutTicketV1;\n    this.recipient = args.recipient;\n    this.amountPaid = args.amountPaid;\n  }\n\n}\n\nexports.PayoutTicket = PayoutTicket;\n\nclass StoreIndexer {\n  constructor(args) {\n    this.key = MetaplexKey.StoreIndexerV1;\n    this.key = MetaplexKey.StoreIndexerV1;\n    this.store = args.store;\n    this.page = args.page;\n    this.auctionCaches = args.auctionCaches;\n  }\n\n}\n\nexports.StoreIndexer = StoreIndexer;\n\nclass AuctionCache {\n  constructor(args) {\n    this.key = MetaplexKey.AuctionCacheV1;\n    this.key = MetaplexKey.AuctionCacheV1;\n    this.store = args.store;\n    this.timestamp = args.timestamp;\n    this.metadata = args.metadata;\n    this.auction = args.auction;\n    this.vault = args.vault;\n    this.auctionManager = args.auctionManager;\n  }\n\n}\n\nexports.AuctionCache = AuctionCache;\n\nclass AuctionManager {\n  constructor(args) {\n    var _a;\n\n    this.pubkey = args.instance.pubkey;\n    this.instance = args.instance;\n    this.numWinners = args.auction.info.bidState.max;\n    this.safetyDepositBoxesExpected = this.instance.info.key == MetaplexKey.AuctionManagerV2 ? new bn_js_1.default(args.vault.info.tokenTypeCount) : new bn_js_1.default(this.instance.info.state.winningConfigItemsValidated);\n    this.store = this.instance.info.store;\n    this.authority = this.instance.info.authority;\n    this.vault = this.instance.info.vault;\n    this.acceptPayment = this.instance.info.acceptPayment;\n    this.auction = this.instance.info.auction;\n    this.status = this.instance.info.state.status;\n    this.safetyDepositConfigs = args.safetyDepositConfigs;\n    this.bidRedemptions = args.bidRedemptions;\n    this.participationConfig = this.instance.info.key == MetaplexKey.AuctionManagerV2 ? ((_a = this.safetyDepositConfigs) === null || _a === void 0 ? void 0 : _a.filter(s => s.info.participationConfig).map(s => {\n      var _a, _b, _c;\n\n      return {\n        winnerConstraint: ((_a = s.info.participationConfig) === null || _a === void 0 ? void 0 : _a.winnerConstraint) || WinningConstraint.NoParticipationPrize,\n        nonWinningConstraint: ((_b = s.info.participationConfig) === null || _b === void 0 ? void 0 : _b.nonWinningConstraint) || NonWinningConstraint.GivenForFixedPrice,\n        fixedPrice: ((_c = s.info.participationConfig) === null || _c === void 0 ? void 0 : _c.fixedPrice) || null,\n        safetyDepositBoxIndex: s.info.order.toNumber()\n      };\n    })[0]) || undefined : this.instance.info.settings.participationConfig || undefined;\n  }\n\n  isItemClaimed(winnerIndex, safetyDepositBoxIndex) {\n    if (this.instance.info.key == MetaplexKey.AuctionManagerV1) {\n      const asV1 = this.instance.info;\n      const itemIndex = asV1.settings.winningConfigs[winnerIndex].items.findIndex(i => i.safetyDepositBoxIndex == safetyDepositBoxIndex);\n      return asV1.state.winningConfigStates[winnerIndex].items[itemIndex].claimed;\n    } else {\n      const winner = this.bidRedemptions.find(b => b.info.winnerIndex && b.info.winnerIndex.eq(new bn_js_1.default(winnerIndex)));\n\n      if (!winner) {\n        return false;\n      } else {\n        return winner.info.getBidRedeemed(safetyDepositBoxIndex);\n      }\n    }\n  }\n\n  getAmountForWinner(winnerIndex, safetyDepositBoxIndex) {\n    var _a;\n\n    if (this.instance.info.key == MetaplexKey.AuctionManagerV1) {\n      return new bn_js_1.default(((_a = this.instance.info.settings.winningConfigs[winnerIndex].items.find(i => i.safetyDepositBoxIndex == safetyDepositBoxIndex)) === null || _a === void 0 ? void 0 : _a.amount) || 0);\n    } else {\n      const safetyDepositConfig = this.safetyDepositConfigs[safetyDepositBoxIndex];\n      return safetyDepositConfig.info.getAmountForWinner(new bn_js_1.default(winnerIndex));\n    }\n  }\n\n  getItemsFromSafetyDepositBoxes(metadataByMint, masterEditionsByPrintingMint, metadataByMasterEdition, masterEditions, boxes) {\n    var _a;\n\n    if (this.instance.info.key == MetaplexKey.AuctionManagerV1) {\n      return this.instance.info.settings.winningConfigs.map(w => {\n        return w.items.map(it => {\n          var _a, _b, _c;\n\n          let metadata = metadataByMint[(_a = boxes[it.safetyDepositBoxIndex]) === null || _a === void 0 ? void 0 : _a.info.tokenMint];\n\n          if (!metadata) {\n            // Means is a limited edition v1, so the tokenMint is the printingMint\n            const masterEdition = masterEditionsByPrintingMint[(_b = boxes[it.safetyDepositBoxIndex]) === null || _b === void 0 ? void 0 : _b.info.tokenMint];\n\n            if (masterEdition) {\n              metadata = metadataByMasterEdition[masterEdition.pubkey];\n            }\n          }\n\n          return {\n            metadata,\n            winningConfigType: it.winningConfigType,\n            safetyDeposit: boxes[it.safetyDepositBoxIndex],\n            amount: new bn_js_1.default(it.amount),\n            masterEdition: ((_c = metadata === null || metadata === void 0 ? void 0 : metadata.info) === null || _c === void 0 ? void 0 : _c.masterEdition) ? masterEditions[metadata.info.masterEdition] : undefined\n          };\n        });\n      });\n    } else {\n      const items = [];\n\n      for (let i = 0; i < this.numWinners.toNumber(); i++) {\n        const newWinnerArr = [];\n        items.push(newWinnerArr);\n        (_a = this.safetyDepositConfigs) === null || _a === void 0 ? void 0 : _a.forEach(s => {\n          var _a;\n\n          const amount = s.info.getAmountForWinner(new bn_js_1.default(i));\n\n          if (amount.gt(new bn_js_1.default(0))) {\n            const safetyDeposit = boxes[s.info.order.toNumber()];\n            const metadata = metadataByMint[safetyDeposit.info.tokenMint];\n            newWinnerArr.push({\n              metadata,\n              winningConfigType: s.info.winningConfigType,\n              safetyDeposit,\n              amount,\n              masterEdition: ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.info) === null || _a === void 0 ? void 0 : _a.masterEdition) ? masterEditions[metadata.info.masterEdition] : undefined\n            });\n          }\n        });\n      }\n\n      return items;\n    }\n  }\n\n}\n\nexports.AuctionManager = AuctionManager;\n\nclass AuctionManagerV2 {\n  constructor(args) {\n    this.key = MetaplexKey.AuctionManagerV2;\n    this.store = args.store;\n    this.authority = args.authority;\n    this.auction = args.auction;\n    this.vault = args.vault;\n    this.acceptPayment = args.acceptPayment;\n    this.state = args.state;\n    const auction = utils_1.programIds().auction;\n    actions_1.getAuctionExtended({\n      auctionProgramId: auction,\n      resource: this.vault\n    }).then(val => this.auctionDataExtended = val);\n  }\n\n}\n\nexports.AuctionManagerV2 = AuctionManagerV2;\n\nclass AuctionManagerStateV2 {\n  constructor(args) {\n    this.status = AuctionManagerStatus.Initialized;\n    this.safetyConfigItemsValidated = new bn_js_1.default(0);\n    this.bidsPushedToAcceptPayment = new bn_js_1.default(0);\n    this.hasParticipation = false;\n    Object.assign(this, args);\n  }\n\n}\n\nexports.AuctionManagerStateV2 = AuctionManagerStateV2;\n\nclass ParticipationStateV2 {\n  constructor(args) {\n    this.collectedToAcceptPayment = new bn_js_1.default(0);\n    Object.assign(this, args);\n  }\n\n}\n\nexports.ParticipationStateV2 = ParticipationStateV2;\n\nclass ParticipationConfigV2 {\n  constructor(args) {\n    this.winnerConstraint = WinningConstraint.NoParticipationPrize;\n    this.nonWinningConstraint = NonWinningConstraint.GivenForFixedPrice;\n    this.fixedPrice = new bn_js_1.default(0);\n    Object.assign(this, args);\n  }\n\n}\n\nexports.ParticipationConfigV2 = ParticipationConfigV2;\n\nclass RedeemBidArgs {\n  constructor() {\n    this.instruction = 2;\n  }\n\n}\n\nexports.RedeemBidArgs = RedeemBidArgs;\n\nclass RedeemFullRightsTransferBidArgs {\n  constructor() {\n    this.instruction = 3;\n  }\n\n}\n\nexports.RedeemFullRightsTransferBidArgs = RedeemFullRightsTransferBidArgs;\n\nclass StartAuctionArgs {\n  constructor() {\n    this.instruction = 5;\n  }\n\n}\n\nexports.StartAuctionArgs = StartAuctionArgs;\n\nclass EndAuctionArgs {\n  constructor(args) {\n    this.instruction = 20;\n    this.reveal = args.reveal;\n  }\n\n}\n\nexports.EndAuctionArgs = EndAuctionArgs;\n\nclass ClaimBidArgs {\n  constructor() {\n    this.instruction = 6;\n  }\n\n}\n\nexports.ClaimBidArgs = ClaimBidArgs;\nvar ProxyCallAddress;\n\n(function (ProxyCallAddress) {\n  ProxyCallAddress[ProxyCallAddress[\"RedeemBid\"] = 0] = \"RedeemBid\";\n  ProxyCallAddress[ProxyCallAddress[\"RedeemFullRightsTransferBid\"] = 1] = \"RedeemFullRightsTransferBid\";\n})(ProxyCallAddress = exports.ProxyCallAddress || (exports.ProxyCallAddress = {}));\n\nclass RedeemUnusedWinningConfigItemsAsAuctioneerArgs {\n  constructor(args) {\n    this.instruction = 12;\n    this.winningConfigItemIndex = args.winningConfigItemIndex;\n    this.proxyCall = args.proxyCall;\n  }\n\n}\n\nexports.RedeemUnusedWinningConfigItemsAsAuctioneerArgs = RedeemUnusedWinningConfigItemsAsAuctioneerArgs;\n\nclass EmptyPaymentAccountArgs {\n  constructor(args) {\n    this.instruction = 7;\n    this.winningConfigIndex = args.winningConfigIndex;\n    this.winningConfigItemIndex = args.winningConfigItemIndex;\n    this.creatorIndex = args.creatorIndex;\n  }\n\n}\n\nexports.EmptyPaymentAccountArgs = EmptyPaymentAccountArgs;\n\nclass SetStoreArgs {\n  constructor(args) {\n    this.instruction = 8;\n    this.public = args.public;\n  }\n\n}\n\nexports.SetStoreArgs = SetStoreArgs;\n\nclass SetWhitelistedCreatorArgs {\n  constructor(args) {\n    this.instruction = 9;\n    this.activated = args.activated;\n  }\n\n}\n\nexports.SetWhitelistedCreatorArgs = SetWhitelistedCreatorArgs;\n\nclass DecommissionAuctionManagerArgs {\n  constructor() {\n    this.instruction = 13;\n  }\n\n}\n\nexports.DecommissionAuctionManagerArgs = DecommissionAuctionManagerArgs;\n\nclass RedeemPrintingV2BidArgs {\n  constructor(args) {\n    this.instruction = 14;\n    this.editionOffset = args.editionOffset;\n    this.winIndex = args.winIndex;\n  }\n\n}\n\nexports.RedeemPrintingV2BidArgs = RedeemPrintingV2BidArgs;\n\nclass WithdrawMasterEditionArgs {\n  constructor() {\n    this.instruction = 15;\n  }\n\n}\n\nexports.WithdrawMasterEditionArgs = WithdrawMasterEditionArgs;\n\nclass RedeemParticipationBidV3Args {\n  constructor(args) {\n    this.instruction = 19;\n    this.winIndex = args.winIndex;\n  }\n\n}\n\nexports.RedeemParticipationBidV3Args = RedeemParticipationBidV3Args;\n\nclass SetStoreIndexArgs {\n  constructor(args) {\n    this.instruction = 21;\n    this.page = args.page;\n    this.offset = args.offset;\n  }\n\n}\n\nexports.SetStoreIndexArgs = SetStoreIndexArgs;\n\nclass SetAuctionCacheArgs {\n  constructor() {\n    this.instruction = 22;\n  }\n\n}\n\nexports.SetAuctionCacheArgs = SetAuctionCacheArgs;\nvar WinningConstraint;\n\n(function (WinningConstraint) {\n  WinningConstraint[WinningConstraint[\"NoParticipationPrize\"] = 0] = \"NoParticipationPrize\";\n  WinningConstraint[WinningConstraint[\"ParticipationPrizeGiven\"] = 1] = \"ParticipationPrizeGiven\";\n})(WinningConstraint = exports.WinningConstraint || (exports.WinningConstraint = {}));\n\nvar NonWinningConstraint;\n\n(function (NonWinningConstraint) {\n  NonWinningConstraint[NonWinningConstraint[\"NoParticipationPrize\"] = 0] = \"NoParticipationPrize\";\n  NonWinningConstraint[NonWinningConstraint[\"GivenForFixedPrice\"] = 1] = \"GivenForFixedPrice\";\n  NonWinningConstraint[NonWinningConstraint[\"GivenForBidPrice\"] = 2] = \"GivenForBidPrice\";\n})(NonWinningConstraint = exports.NonWinningConstraint || (exports.NonWinningConstraint = {}));\n\nvar WinningConfigType;\n\n(function (WinningConfigType) {\n  /// You may be selling your one-of-a-kind NFT for the first time, but not it's accompanying Metadata,\n  /// of which you would like to retain ownership. You get 100% of the payment the first sale, then\n  /// royalties forever after.\n  ///\n  /// You may be re-selling something like a Limited/Open Edition print from another auction,\n  /// a master edition record token by itself (Without accompanying metadata/printing ownership), etc.\n  /// This means artists will get royalty fees according to the top level royalty % on the metadata\n  /// split according to their percentages of contribution.\n  ///\n  /// No metadata ownership is transferred in this instruction, which means while you may be transferring\n  /// the token for a limited/open edition away, you would still be (nominally) the owner of the limited edition\n  /// metadata, though it confers no rights or privileges of any kind.\n  WinningConfigType[WinningConfigType[\"TokenOnlyTransfer\"] = 0] = \"TokenOnlyTransfer\"; /// Means you are auctioning off the master edition record and it's metadata ownership as well as the\n  /// token itself. The other person will be able to mint authorization tokens and make changes to the\n  /// artwork.\n\n  WinningConfigType[WinningConfigType[\"FullRightsTransfer\"] = 1] = \"FullRightsTransfer\"; /// Means you are using authorization tokens to print off editions during the auction using\n  /// from a MasterEditionV1\n\n  WinningConfigType[WinningConfigType[\"PrintingV1\"] = 2] = \"PrintingV1\"; /// Means you are using the MasterEditionV2 to print off editions\n\n  WinningConfigType[WinningConfigType[\"PrintingV2\"] = 3] = \"PrintingV2\"; /// Means you are using a MasterEditionV2 as a participation prize.\n\n  WinningConfigType[WinningConfigType[\"Participation\"] = 4] = \"Participation\";\n})(WinningConfigType = exports.WinningConfigType || (exports.WinningConfigType = {}));\n\nconst decodeStoreIndexer = buffer => {\n  return borsh_1.deserializeUnchecked(exports.SCHEMA, StoreIndexer, buffer);\n};\n\nexports.decodeStoreIndexer = decodeStoreIndexer;\n\nconst decodeAuctionCache = buffer => {\n  return borsh_1.deserializeUnchecked(exports.SCHEMA, AuctionCache, buffer);\n};\n\nexports.decodeAuctionCache = decodeAuctionCache;\n\nconst decodePrizeTrackingTicket = buffer => {\n  return borsh_1.deserializeUnchecked(exports.SCHEMA, PrizeTrackingTicket, buffer);\n};\n\nexports.decodePrizeTrackingTicket = decodePrizeTrackingTicket;\n\nconst decodeWhitelistedCreator = buffer => {\n  return borsh_1.deserializeUnchecked(exports.SCHEMA, WhitelistedCreator, buffer);\n};\n\nexports.decodeWhitelistedCreator = decodeWhitelistedCreator;\n\nconst WhitelistedCreatorParser = (pubkey, account) => ({\n  pubkey,\n  account,\n  info: exports.decodeWhitelistedCreator(account.data)\n});\n\nexports.WhitelistedCreatorParser = WhitelistedCreatorParser;\n\nconst decodeStore = buffer => {\n  return borsh_1.deserializeUnchecked(exports.SCHEMA, Store, buffer);\n};\n\nexports.decodeStore = decodeStore;\n\nconst decodeAuctionManager = buffer => {\n  return buffer[0] == MetaplexKey.AuctionManagerV1 ? borsh_1.deserializeUnchecked(exports.SCHEMA, deprecatedStates_1.AuctionManagerV1, buffer) : borsh_1.deserializeUnchecked(exports.SCHEMA, AuctionManagerV2, buffer);\n};\n\nexports.decodeAuctionManager = decodeAuctionManager;\n\nconst decodeBidRedemptionTicket = buffer => {\n  return buffer[0] == MetaplexKey.BidRedemptionTicketV1 ? borsh_1.deserializeUnchecked(exports.SCHEMA, deprecatedStates_1.BidRedemptionTicketV1, buffer) : new BidRedemptionTicketV2({\n    key: MetaplexKey.BidRedemptionTicketV2,\n    data: buffer.toJSON().data\n  });\n};\n\nexports.decodeBidRedemptionTicket = decodeBidRedemptionTicket;\n\nconst decodeSafetyDepositConfig = buffer => {\n  return new SafetyDepositConfig({\n    data: buffer\n  });\n};\n\nexports.decodeSafetyDepositConfig = decodeSafetyDepositConfig;\n\nconst decodePayoutTicket = buffer => {\n  return borsh_1.deserializeUnchecked(exports.SCHEMA, PayoutTicket, buffer);\n};\n\nexports.decodePayoutTicket = decodePayoutTicket;\n\nclass WhitelistedCreator {\n  constructor(args) {\n    this.key = MetaplexKey.WhitelistedCreatorV1;\n    this.activated = true;\n    this.address = args.address;\n    this.activated = args.activated;\n  }\n\n}\n\nexports.WhitelistedCreator = WhitelistedCreator;\n\nclass Store {\n  constructor(args) {\n    this.key = MetaplexKey.StoreV1;\n    this.public = true;\n    this.key = MetaplexKey.StoreV1;\n    this.public = args.public;\n    this.auctionProgram = args.auctionProgram;\n    this.tokenVaultProgram = args.tokenVaultProgram;\n    this.tokenMetadataProgram = args.tokenMetadataProgram;\n    this.tokenProgram = args.tokenProgram;\n  }\n\n}\n\nexports.Store = Store;\n\nclass BidRedemptionTicketV2 {\n  constructor(args) {\n    this.key = MetaplexKey.BidRedemptionTicketV2;\n    this.data = [];\n    Object.assign(this, args);\n    let offset = 2;\n\n    if (this.data[1] == 0) {\n      this.winnerIndex = null;\n    } else {\n      this.winnerIndex = new bn_js_1.default(this.data.slice(2, 8), 'le');\n      offset += 8;\n    }\n\n    this.auctionManager = bs58_1.default.encode(this.data.slice(offset, offset + 32));\n  }\n\n  getBidRedeemed(order) {\n    let offset = 42;\n\n    if (this.data[1] == 0) {\n      offset -= 8;\n    }\n\n    const index = Math.floor(order / 8) + offset;\n    const positionFromRight = 7 - order % 8;\n    const mask = Math.pow(2, positionFromRight);\n    const appliedMask = this.data[index] & mask;\n    return appliedMask != 0;\n  }\n\n}\n\nexports.BidRedemptionTicketV2 = BidRedemptionTicketV2;\nvar AuctionManagerStatus;\n\n(function (AuctionManagerStatus) {\n  AuctionManagerStatus[AuctionManagerStatus[\"Initialized\"] = 0] = \"Initialized\";\n  AuctionManagerStatus[AuctionManagerStatus[\"Validated\"] = 1] = \"Validated\";\n  AuctionManagerStatus[AuctionManagerStatus[\"Running\"] = 2] = \"Running\";\n  AuctionManagerStatus[AuctionManagerStatus[\"Disbursing\"] = 3] = \"Disbursing\";\n  AuctionManagerStatus[AuctionManagerStatus[\"Finished\"] = 4] = \"Finished\";\n})(AuctionManagerStatus = exports.AuctionManagerStatus || (exports.AuctionManagerStatus = {}));\n\nvar TupleNumericType;\n\n(function (TupleNumericType) {\n  TupleNumericType[TupleNumericType[\"U8\"] = 1] = \"U8\";\n  TupleNumericType[TupleNumericType[\"U16\"] = 2] = \"U16\";\n  TupleNumericType[TupleNumericType[\"U32\"] = 4] = \"U32\";\n  TupleNumericType[TupleNumericType[\"U64\"] = 8] = \"U64\";\n})(TupleNumericType = exports.TupleNumericType || (exports.TupleNumericType = {}));\n\nclass AmountRange {\n  constructor(args) {\n    this.amount = args.amount;\n    this.length = args.length;\n  }\n\n}\n\nexports.AmountRange = AmountRange;\n\nclass InitAuctionManagerV2Args {\n  constructor(args) {\n    this.instruction = 17;\n    this.amountType = TupleNumericType.U8;\n    this.lengthType = TupleNumericType.U8;\n    this.maxRanges = new bn_js_1.default(1);\n    this.amountType = args.amountType;\n    this.lengthType = args.lengthType;\n    this.maxRanges = args.maxRanges;\n  }\n\n}\n\nexports.InitAuctionManagerV2Args = InitAuctionManagerV2Args;\n\nclass SafetyDepositConfig {\n  constructor(args) {\n    this.key = MetaplexKey.SafetyDepositConfigV1;\n    this.auctionManager = web3_js_1.SystemProgram.programId.toBase58();\n    this.order = new bn_js_1.default(0);\n    this.winningConfigType = WinningConfigType.PrintingV2;\n    this.amountType = TupleNumericType.U8;\n    this.lengthType = TupleNumericType.U8;\n    this.amountRanges = [];\n    this.participationConfig = null;\n    this.participationState = null;\n\n    if (args.directArgs) {\n      Object.assign(this, args.directArgs);\n    } else if (args.data) {\n      this.auctionManager = bs58_1.default.encode(args.data.slice(1, 33));\n      this.order = new bn_js_1.default(args.data.slice(33, 41), 'le');\n      this.winningConfigType = args.data[41];\n      this.amountType = args.data[42];\n      this.lengthType = args.data[43];\n      const lengthOfArray = new bn_js_1.default(args.data.slice(44, 48), 'le');\n      this.amountRanges = [];\n      let offset = 48;\n\n      for (let i = 0; i < lengthOfArray.toNumber(); i++) {\n        const amount = this.getBNFromData(args.data, offset, this.amountType);\n        offset += this.amountType;\n        const length = this.getBNFromData(args.data, offset, this.lengthType);\n        offset += this.lengthType;\n        this.amountRanges.push(new AmountRange({\n          amount,\n          length\n        }));\n      }\n\n      if (args.data[offset] == 0) {\n        offset += 1;\n        this.participationConfig = null;\n      } else {\n        // pick up participation config manually\n        const winnerConstraintAsNumber = args.data[offset + 1];\n        const nonWinnerConstraintAsNumber = args.data[offset + 2];\n        let fixedPrice = null;\n        offset += 3;\n\n        if (args.data[offset] == 1) {\n          fixedPrice = new bn_js_1.default(args.data.slice(offset + 1, offset + 9), 'le');\n          offset += 9;\n        } else {\n          offset += 1;\n        }\n\n        this.participationConfig = new ParticipationConfigV2({\n          winnerConstraint: winnerConstraintAsNumber,\n          nonWinningConstraint: nonWinnerConstraintAsNumber,\n          fixedPrice: fixedPrice\n        });\n      }\n\n      if (args.data[offset] == 0) {\n        offset += 1;\n        this.participationState = null;\n      } else {\n        // pick up participation state manually\n        const collectedToAcceptPayment = new bn_js_1.default(args.data.slice(offset + 1, offset + 9), 'le');\n        offset += 9;\n        this.participationState = new ParticipationStateV2({\n          collectedToAcceptPayment\n        });\n      }\n    }\n  }\n\n  getBNFromData(data, offset, dataType) {\n    switch (dataType) {\n      case TupleNumericType.U8:\n        return new bn_js_1.default(data[offset], 'le');\n\n      case TupleNumericType.U16:\n        return new bn_js_1.default(data.slice(offset, offset + 2), 'le');\n\n      case TupleNumericType.U32:\n        return new bn_js_1.default(data.slice(offset, offset + 4), 'le');\n\n      case TupleNumericType.U64:\n        return new bn_js_1.default(data.slice(offset, offset + 8), 'le');\n    }\n  }\n\n  getAmountForWinner(winner) {\n    let start = new bn_js_1.default(0);\n\n    for (let i = 0; i < this.amountRanges.length; i++) {\n      const end = start.add(this.amountRanges[i].length);\n\n      if (winner.gte(start) && winner.lt(end)) {\n        return this.amountRanges[i].amount;\n      }\n\n      start = end;\n    }\n\n    return new bn_js_1.default(0);\n  }\n\n}\n\nexports.SafetyDepositConfig = SafetyDepositConfig;\n\nclass ValidateSafetyDepositBoxV2Args {\n  constructor(safetyDeposit) {\n    this.instruction = 18;\n    this.safetyDepositConfig = safetyDeposit;\n  }\n\n}\n\nexports.ValidateSafetyDepositBoxV2Args = ValidateSafetyDepositBoxV2Args;\nexports.SCHEMA = new Map([...deprecatedStates_1.DEPRECATED_SCHEMA, [StoreIndexer, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['store', 'pubkeyAsString'], ['page', 'u64'], ['auctionCaches', ['pubkeyAsString']]]\n}], [AuctionCache, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['store', 'pubkeyAsString'], ['timestamp', 'u64'], ['metadata', ['pubkeyAsString']], ['auction', 'pubkeyAsString'], ['vault', 'pubkeyAsString'], ['auctionManager', 'pubkeyAsString']]\n}], [PrizeTrackingTicket, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['metadata', 'pubkeyAsString'], ['supplySnapshot', 'u64'], ['expectedRedemptions', 'u64'], ['redemptions', 'u64']]\n}], [AuctionManagerV2, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['store', 'pubkeyAsString'], ['authority', 'pubkeyAsString'], ['auction', 'pubkeyAsString'], ['vault', 'pubkeyAsString'], ['acceptPayment', 'pubkeyAsString'], ['state', AuctionManagerStateV2]]\n}], [ParticipationConfigV2, {\n  kind: 'struct',\n  fields: [['winnerConstraint', 'u8'], ['nonWinningConstraint', 'u8'], ['fixedPrice', {\n    kind: 'option',\n    type: 'u64'\n  }]]\n}], [WhitelistedCreator, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['address', 'pubkeyAsString'], ['activated', 'u8']]\n}], [Store, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['public', 'u8'], ['auctionProgram', 'pubkeyAsString'], ['tokenVaultProgram', 'pubkeyAsString'], ['tokenMetadataProgram', 'pubkeyAsString'], ['tokenProgram', 'pubkeyAsString']]\n}], [AuctionManagerStateV2, {\n  kind: 'struct',\n  fields: [['status', 'u8'], ['safetyConfigItemsValidated', 'u64'], ['bidsPushedToAcceptPayment', 'u64'], ['hasParticipation', 'u8']]\n}], [ParticipationStateV2, {\n  kind: 'struct',\n  fields: [['collectedToAcceptPayment', 'u64']]\n}], [PayoutTicket, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['recipient', 'pubkeyAsString'], ['amountPaid', 'u64']]\n}], [AmountRange, {\n  kind: 'struct',\n  fields: [['amount', 'u64'], ['length', 'u64']]\n}], [SafetyDepositConfig, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['auctionManager', 'pubkeyAsString'], ['order', 'u64'], ['winningConfigType', 'u8'], ['amountType', 'u8'], ['lengthType', 'u8'], ['amountRanges', [AmountRange]], ['participationConfig', {\n    kind: 'option',\n    type: ParticipationConfigV2\n  }], ['participationState', {\n    kind: 'option',\n    type: ParticipationStateV2\n  }]]\n}], [RedeemUnusedWinningConfigItemsAsAuctioneerArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['winningConfigItemIndex', 'u8'], ['proxyCall', 'u8']]\n}], [DecommissionAuctionManagerArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8']]\n}], [RedeemPrintingV2BidArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['editionOffset', 'u64'], ['winIndex', 'u64']]\n}], [WithdrawMasterEditionArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8']]\n}], [RedeemParticipationBidV3Args, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['winIndex', {\n    kind: 'option',\n    type: 'u64'\n  }]]\n}], [InitAuctionManagerV2Args, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['amountType', 'u8'], ['lengthType', 'u8'], ['maxRanges', 'u64']]\n}], [ValidateSafetyDepositBoxV2Args, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['safetyDepositConfig', SafetyDepositConfig]]\n}], [RedeemBidArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8']]\n}], [RedeemFullRightsTransferBidArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8']]\n}], [StartAuctionArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8']]\n}], [EndAuctionArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['reveal', {\n    kind: 'option',\n    type: [bn_js_1.default]\n  }]]\n}], [ClaimBidArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8']]\n}], [SetAuctionCacheArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8']]\n}], [SetStoreIndexArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['page', 'u64'], ['offset', 'u64']]\n}], [EmptyPaymentAccountArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['winningConfigIndex', {\n    kind: 'option',\n    type: 'u8'\n  }], ['winningConfigItemIndex', {\n    kind: 'option',\n    type: 'u8'\n  }], ['creatorIndex', {\n    kind: 'option',\n    type: 'u8'\n  }]]\n}], [SetStoreArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['public', 'u8'] //bool\n  ]\n}], [SetWhitelistedCreatorArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['activated', 'u8'] //bool\n  ]\n}]]);\n\nasync function getAuctionManagerKey(vault, auctionKey) {\n  const PROGRAM_IDS = utils_1.programIds();\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METAPLEX_PREFIX), utils_1.toPublicKey(auctionKey).toBuffer()], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\n}\n\nexports.getAuctionManagerKey = getAuctionManagerKey;\n\nasync function getAuctionKeys(vault) {\n  const PROGRAM_IDS = utils_1.programIds();\n  const auctionKey = (await utils_1.findProgramAddress([Buffer.from(actions_1.AUCTION_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.auction).toBuffer(), utils_1.toPublicKey(vault).toBuffer()], utils_1.toPublicKey(PROGRAM_IDS.auction)))[0];\n  const auctionManagerKey = await getAuctionManagerKey(vault, auctionKey);\n  return {\n    auctionKey,\n    auctionManagerKey\n  };\n}\n\nexports.getAuctionKeys = getAuctionKeys;\n\nasync function getBidRedemption(auctionKey, bidMetadata) {\n  const PROGRAM_IDS = utils_1.programIds();\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METAPLEX_PREFIX), utils_1.toPublicKey(auctionKey).toBuffer(), utils_1.toPublicKey(bidMetadata).toBuffer()], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\n}\n\nexports.getBidRedemption = getBidRedemption;\n\nasync function getBidderKeys(auctionKey, bidder) {\n  const PROGRAM_IDS = utils_1.programIds();\n  const bidMetadata = (await utils_1.findProgramAddress([Buffer.from(actions_1.AUCTION_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.auction).toBuffer(), utils_1.toPublicKey(auctionKey).toBuffer(), utils_1.toPublicKey(bidder).toBuffer(), Buffer.from(actions_1.METADATA)], utils_1.toPublicKey(PROGRAM_IDS.auction)))[0];\n  const bidRedemption = await getBidRedemption(auctionKey, bidMetadata);\n  return {\n    bidMetadata,\n    bidRedemption\n  };\n}\n\nexports.getBidderKeys = getBidderKeys;\n\nasync function getOriginalAuthority(auctionKey, metadata) {\n  const PROGRAM_IDS = utils_1.programIds();\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METAPLEX_PREFIX), utils_1.toPublicKey(auctionKey).toBuffer(), utils_1.toPublicKey(metadata).toBuffer()], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\n}\n\nexports.getOriginalAuthority = getOriginalAuthority;\n\nconst isCreatorPartOfTheStore = async (creatorAddress, pubkey, store) => {\n  const creatorKeyInStore = await getWhitelistedCreator(creatorAddress, store);\n  return creatorKeyInStore === pubkey;\n};\n\nexports.isCreatorPartOfTheStore = isCreatorPartOfTheStore;\n\nasync function getWhitelistedCreator(creator, storeId) {\n  const PROGRAM_IDS = utils_1.programIds();\n  const store = storeId || PROGRAM_IDS.store;\n\n  if (!store) {\n    throw new Error('Store not initialized');\n  }\n\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METAPLEX_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(), utils_1.toPublicKey(store).toBuffer(), utils_1.toPublicKey(creator).toBuffer()], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\n}\n\nexports.getWhitelistedCreator = getWhitelistedCreator;\n\nasync function getPrizeTrackingTicket(auctionManager, mint) {\n  const PROGRAM_IDS = utils_1.programIds();\n  const store = PROGRAM_IDS.store;\n\n  if (!store) {\n    throw new Error('Store not initialized');\n  }\n\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METAPLEX_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(), utils_1.toPublicKey(auctionManager).toBuffer(), utils_1.toPublicKey(mint).toBuffer()], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\n}\n\nexports.getPrizeTrackingTicket = getPrizeTrackingTicket;\n\nasync function getAuctionWinnerTokenTypeTracker(auctionManager) {\n  const PROGRAM_IDS = utils_1.programIds();\n  const store = PROGRAM_IDS.store;\n\n  if (!store) {\n    throw new Error('Store not initialized');\n  }\n\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METAPLEX_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(), utils_1.toPublicKey(auctionManager).toBuffer(), Buffer.from(exports.TOTALS)], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\n}\n\nexports.getAuctionWinnerTokenTypeTracker = getAuctionWinnerTokenTypeTracker;\n\nasync function getSafetyDepositConfig(auctionManager, safetyDeposit) {\n  const PROGRAM_IDS = utils_1.programIds();\n  const store = PROGRAM_IDS.store;\n\n  if (!store) {\n    throw new Error('Store not initialized');\n  }\n\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METAPLEX_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(), utils_1.toPublicKey(auctionManager).toBuffer(), utils_1.toPublicKey(safetyDeposit).toBuffer()], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\n}\n\nexports.getSafetyDepositConfig = getSafetyDepositConfig;\n\nasync function getStoreIndexer(page) {\n  const PROGRAM_IDS = utils_1.programIds();\n  const store = PROGRAM_IDS.store;\n\n  if (!store) {\n    throw new Error('Store not initialized');\n  }\n\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METAPLEX_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(), utils_1.toPublicKey(store).toBuffer(), Buffer.from(exports.INDEX), Buffer.from(page.toString())], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\n}\n\nexports.getStoreIndexer = getStoreIndexer;\n\nasync function getAuctionCache(auction) {\n  const PROGRAM_IDS = utils_1.programIds();\n  const store = PROGRAM_IDS.store;\n\n  if (!store) {\n    throw new Error('Store not initialized');\n  }\n\n  console.log('Auction', auction);\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METAPLEX_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(), utils_1.toPublicKey(store).toBuffer(), utils_1.toPublicKey(auction).toBuffer(), Buffer.from(exports.CACHE)], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\n}\n\nexports.getAuctionCache = getAuctionCache;\n\nasync function getPayoutTicket(auctionManager, winnerConfigIndex, winnerConfigItemIndex, creatorIndex, safetyDepositBox, recipient) {\n  const PROGRAM_IDS = utils_1.programIds();\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METAPLEX_PREFIX), utils_1.toPublicKey(auctionManager).toBuffer(), Buffer.from(winnerConfigIndex !== null && winnerConfigIndex !== undefined ? winnerConfigIndex.toString() : 'participation'), Buffer.from(winnerConfigItemIndex !== null && winnerConfigItemIndex !== undefined ? winnerConfigItemIndex.toString() : '0'), Buffer.from(creatorIndex !== null && creatorIndex !== undefined ? creatorIndex.toString() : 'auctioneer'), utils_1.toPublicKey(safetyDepositBox).toBuffer(), utils_1.toPublicKey(recipient).toBuffer()], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\n}\n\nexports.getPayoutTicket = getPayoutTicket;","map":{"version":3,"sources":["../../../../src/models/metaplex/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Store = exports.WhitelistedCreator = exports.decodePayoutTicket = exports.decodeSafetyDepositConfig = exports.decodeBidRedemptionTicket = exports.decodeAuctionManager = exports.decodeStore = exports.WhitelistedCreatorParser = exports.decodeWhitelistedCreator = exports.decodePrizeTrackingTicket = exports.decodeAuctionCache = exports.decodeStoreIndexer = exports.WinningConfigType = exports.NonWinningConstraint = exports.WinningConstraint = exports.SetAuctionCacheArgs = exports.SetStoreIndexArgs = exports.RedeemParticipationBidV3Args = exports.WithdrawMasterEditionArgs = exports.RedeemPrintingV2BidArgs = exports.DecommissionAuctionManagerArgs = exports.SetWhitelistedCreatorArgs = exports.SetStoreArgs = exports.EmptyPaymentAccountArgs = exports.RedeemUnusedWinningConfigItemsAsAuctioneerArgs = exports.ProxyCallAddress = exports.ClaimBidArgs = exports.EndAuctionArgs = exports.StartAuctionArgs = exports.RedeemFullRightsTransferBidArgs = exports.RedeemBidArgs = exports.ParticipationConfigV2 = exports.ParticipationStateV2 = exports.AuctionManagerStateV2 = exports.AuctionManagerV2 = exports.AuctionManager = exports.AuctionCache = exports.StoreIndexer = exports.PayoutTicket = exports.PrizeTrackingTicket = exports.MetaplexKey = exports.MAX_PAYOUT_TICKET_SIZE = exports.MAX_WHITELISTED_CREATOR_SIZE = exports.MAX_PRIZE_TRACKING_TICKET_SIZE = exports.ORIGINAL_AUTHORITY_LOOKUP_SIZE = exports.MAX_INDEXED_ELEMENTS = exports.TOTALS = exports.CACHE = exports.INDEX = exports.METAPLEX_PREFIX = void 0;\r\nexports.getPayoutTicket = exports.getAuctionCache = exports.getStoreIndexer = exports.getSafetyDepositConfig = exports.getAuctionWinnerTokenTypeTracker = exports.getPrizeTrackingTicket = exports.getWhitelistedCreator = exports.isCreatorPartOfTheStore = exports.getOriginalAuthority = exports.getBidderKeys = exports.getBidRedemption = exports.getAuctionKeys = exports.getAuctionManagerKey = exports.SCHEMA = exports.ValidateSafetyDepositBoxV2Args = exports.SafetyDepositConfig = exports.InitAuctionManagerV2Args = exports.AmountRange = exports.TupleNumericType = exports.AuctionManagerStatus = exports.BidRedemptionTicketV2 = void 0;\r\nconst web3_js_1 = require(\"@solana/web3.js\");\r\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\r\nconst bs58_1 = __importDefault(require(\"bs58\"));\r\nconst borsh_1 = require(\"borsh\");\r\nconst actions_1 = require(\"../../actions\");\r\nconst utils_1 = require(\"../../utils\");\r\nconst deprecatedStates_1 = require(\"./deprecatedStates\");\r\n__exportStar(require(\"./deprecatedInitAuctionManagerV1\"), exports);\r\n__exportStar(require(\"./redeemBid\"), exports);\r\n__exportStar(require(\"./redeemFullRightsTransferBid\"), exports);\r\n__exportStar(require(\"./deprecatedRedeemParticipationBid\"), exports);\r\n__exportStar(require(\"./startAuction\"), exports);\r\n__exportStar(require(\"./deprecatedValidateSafetyDepositBoxV1\"), exports);\r\n__exportStar(require(\"./redeemParticipationBidV3\"), exports);\r\n__exportStar(require(\"./redeemPrintingV2Bid\"), exports);\r\n__exportStar(require(\"./withdrawMasterEdition\"), exports);\r\n__exportStar(require(\"./deprecatedStates\"), exports);\r\nexports.METAPLEX_PREFIX = 'metaplex';\r\nexports.INDEX = 'index';\r\nexports.CACHE = 'cache';\r\nexports.TOTALS = 'totals';\r\nexports.MAX_INDEXED_ELEMENTS = 100;\r\nexports.ORIGINAL_AUTHORITY_LOOKUP_SIZE = 33;\r\nexports.MAX_PRIZE_TRACKING_TICKET_SIZE = 1 + 32 + 8 + 8 + 8 + 50;\r\nexports.MAX_WHITELISTED_CREATOR_SIZE = 2 + 32 + 10;\r\nexports.MAX_PAYOUT_TICKET_SIZE = 1 + 32 + 8;\r\nvar MetaplexKey;\r\n(function (MetaplexKey) {\r\n    MetaplexKey[MetaplexKey[\"Uninitialized\"] = 0] = \"Uninitialized\";\r\n    MetaplexKey[MetaplexKey[\"OriginalAuthorityLookupV1\"] = 1] = \"OriginalAuthorityLookupV1\";\r\n    MetaplexKey[MetaplexKey[\"BidRedemptionTicketV1\"] = 2] = \"BidRedemptionTicketV1\";\r\n    MetaplexKey[MetaplexKey[\"StoreV1\"] = 3] = \"StoreV1\";\r\n    MetaplexKey[MetaplexKey[\"WhitelistedCreatorV1\"] = 4] = \"WhitelistedCreatorV1\";\r\n    MetaplexKey[MetaplexKey[\"PayoutTicketV1\"] = 5] = \"PayoutTicketV1\";\r\n    MetaplexKey[MetaplexKey[\"SafetyDepositValidationTicketV1\"] = 6] = \"SafetyDepositValidationTicketV1\";\r\n    MetaplexKey[MetaplexKey[\"AuctionManagerV1\"] = 7] = \"AuctionManagerV1\";\r\n    MetaplexKey[MetaplexKey[\"PrizeTrackingTicketV1\"] = 8] = \"PrizeTrackingTicketV1\";\r\n    MetaplexKey[MetaplexKey[\"SafetyDepositConfigV1\"] = 9] = \"SafetyDepositConfigV1\";\r\n    MetaplexKey[MetaplexKey[\"AuctionManagerV2\"] = 10] = \"AuctionManagerV2\";\r\n    MetaplexKey[MetaplexKey[\"BidRedemptionTicketV2\"] = 11] = \"BidRedemptionTicketV2\";\r\n    MetaplexKey[MetaplexKey[\"AuctionWinnerTokenTypeTrackerV1\"] = 12] = \"AuctionWinnerTokenTypeTrackerV1\";\r\n    MetaplexKey[MetaplexKey[\"StoreIndexerV1\"] = 13] = \"StoreIndexerV1\";\r\n    MetaplexKey[MetaplexKey[\"AuctionCacheV1\"] = 14] = \"AuctionCacheV1\";\r\n})(MetaplexKey = exports.MetaplexKey || (exports.MetaplexKey = {}));\r\nclass PrizeTrackingTicket {\r\n    constructor(args) {\r\n        this.key = MetaplexKey.PrizeTrackingTicketV1;\r\n        this.key = MetaplexKey.PrizeTrackingTicketV1;\r\n        this.metadata = args.metadata;\r\n        this.supplySnapshot = args.supplySnapshot;\r\n        this.expectedRedemptions = args.expectedRedemptions;\r\n        this.redemptions = args.redemptions;\r\n    }\r\n}\r\nexports.PrizeTrackingTicket = PrizeTrackingTicket;\r\nclass PayoutTicket {\r\n    constructor(args) {\r\n        this.key = MetaplexKey.PayoutTicketV1;\r\n        this.key = MetaplexKey.PayoutTicketV1;\r\n        this.recipient = args.recipient;\r\n        this.amountPaid = args.amountPaid;\r\n    }\r\n}\r\nexports.PayoutTicket = PayoutTicket;\r\nclass StoreIndexer {\r\n    constructor(args) {\r\n        this.key = MetaplexKey.StoreIndexerV1;\r\n        this.key = MetaplexKey.StoreIndexerV1;\r\n        this.store = args.store;\r\n        this.page = args.page;\r\n        this.auctionCaches = args.auctionCaches;\r\n    }\r\n}\r\nexports.StoreIndexer = StoreIndexer;\r\nclass AuctionCache {\r\n    constructor(args) {\r\n        this.key = MetaplexKey.AuctionCacheV1;\r\n        this.key = MetaplexKey.AuctionCacheV1;\r\n        this.store = args.store;\r\n        this.timestamp = args.timestamp;\r\n        this.metadata = args.metadata;\r\n        this.auction = args.auction;\r\n        this.vault = args.vault;\r\n        this.auctionManager = args.auctionManager;\r\n    }\r\n}\r\nexports.AuctionCache = AuctionCache;\r\nclass AuctionManager {\r\n    constructor(args) {\r\n        var _a;\r\n        this.pubkey = args.instance.pubkey;\r\n        this.instance = args.instance;\r\n        this.numWinners = args.auction.info.bidState.max;\r\n        this.safetyDepositBoxesExpected =\r\n            this.instance.info.key == MetaplexKey.AuctionManagerV2\r\n                ? new bn_js_1.default(args.vault.info.tokenTypeCount)\r\n                : new bn_js_1.default(this.instance.info.state.winningConfigItemsValidated);\r\n        this.store = this.instance.info.store;\r\n        this.authority = this.instance.info.authority;\r\n        this.vault = this.instance.info.vault;\r\n        this.acceptPayment = this.instance.info.acceptPayment;\r\n        this.auction = this.instance.info.auction;\r\n        this.status = this.instance.info.state.status;\r\n        this.safetyDepositConfigs = args.safetyDepositConfigs;\r\n        this.bidRedemptions = args.bidRedemptions;\r\n        this.participationConfig =\r\n            this.instance.info.key == MetaplexKey.AuctionManagerV2\r\n                ? ((_a = this.safetyDepositConfigs) === null || _a === void 0 ? void 0 : _a.filter(s => s.info.participationConfig).map(s => {\r\n                    var _a, _b, _c;\r\n                    return ({\r\n                        winnerConstraint: ((_a = s.info.participationConfig) === null || _a === void 0 ? void 0 : _a.winnerConstraint) ||\r\n                            WinningConstraint.NoParticipationPrize,\r\n                        nonWinningConstraint: ((_b = s.info.participationConfig) === null || _b === void 0 ? void 0 : _b.nonWinningConstraint) ||\r\n                            NonWinningConstraint.GivenForFixedPrice,\r\n                        fixedPrice: ((_c = s.info.participationConfig) === null || _c === void 0 ? void 0 : _c.fixedPrice) || null,\r\n                        safetyDepositBoxIndex: s.info.order.toNumber(),\r\n                    });\r\n                })[0]) || undefined\r\n                : this.instance.info.settings\r\n                    .participationConfig || undefined;\r\n    }\r\n    isItemClaimed(winnerIndex, safetyDepositBoxIndex) {\r\n        if (this.instance.info.key == MetaplexKey.AuctionManagerV1) {\r\n            const asV1 = this.instance.info;\r\n            const itemIndex = asV1.settings.winningConfigs[winnerIndex].items.findIndex(i => i.safetyDepositBoxIndex == safetyDepositBoxIndex);\r\n            return asV1.state.winningConfigStates[winnerIndex].items[itemIndex]\r\n                .claimed;\r\n        }\r\n        else {\r\n            const winner = this.bidRedemptions.find(b => b.info.winnerIndex && b.info.winnerIndex.eq(new bn_js_1.default(winnerIndex)));\r\n            if (!winner) {\r\n                return false;\r\n            }\r\n            else {\r\n                return winner.info.getBidRedeemed(safetyDepositBoxIndex);\r\n            }\r\n        }\r\n    }\r\n    getAmountForWinner(winnerIndex, safetyDepositBoxIndex) {\r\n        var _a;\r\n        if (this.instance.info.key == MetaplexKey.AuctionManagerV1) {\r\n            return new bn_js_1.default(((_a = this.instance.info.settings.winningConfigs[winnerIndex].items.find(i => i.safetyDepositBoxIndex == safetyDepositBoxIndex)) === null || _a === void 0 ? void 0 : _a.amount) || 0);\r\n        }\r\n        else {\r\n            const safetyDepositConfig = this.safetyDepositConfigs[safetyDepositBoxIndex];\r\n            return safetyDepositConfig.info.getAmountForWinner(new bn_js_1.default(winnerIndex));\r\n        }\r\n    }\r\n    getItemsFromSafetyDepositBoxes(metadataByMint, masterEditionsByPrintingMint, metadataByMasterEdition, masterEditions, boxes) {\r\n        var _a;\r\n        if (this.instance.info.key == MetaplexKey.AuctionManagerV1) {\r\n            return this.instance.info.settings.winningConfigs.map(w => {\r\n                return w.items.map(it => {\r\n                    var _a, _b, _c;\r\n                    let metadata = metadataByMint[(_a = boxes[it.safetyDepositBoxIndex]) === null || _a === void 0 ? void 0 : _a.info.tokenMint];\r\n                    if (!metadata) {\r\n                        // Means is a limited edition v1, so the tokenMint is the printingMint\r\n                        const masterEdition = masterEditionsByPrintingMint[(_b = boxes[it.safetyDepositBoxIndex]) === null || _b === void 0 ? void 0 : _b.info.tokenMint];\r\n                        if (masterEdition) {\r\n                            metadata = metadataByMasterEdition[masterEdition.pubkey];\r\n                        }\r\n                    }\r\n                    return {\r\n                        metadata,\r\n                        winningConfigType: it.winningConfigType,\r\n                        safetyDeposit: boxes[it.safetyDepositBoxIndex],\r\n                        amount: new bn_js_1.default(it.amount),\r\n                        masterEdition: ((_c = metadata === null || metadata === void 0 ? void 0 : metadata.info) === null || _c === void 0 ? void 0 : _c.masterEdition)\r\n                            ? masterEditions[metadata.info.masterEdition]\r\n                            : undefined,\r\n                    };\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            const items = [];\r\n            for (let i = 0; i < this.numWinners.toNumber(); i++) {\r\n                const newWinnerArr = [];\r\n                items.push(newWinnerArr);\r\n                (_a = this.safetyDepositConfigs) === null || _a === void 0 ? void 0 : _a.forEach(s => {\r\n                    var _a;\r\n                    const amount = s.info.getAmountForWinner(new bn_js_1.default(i));\r\n                    if (amount.gt(new bn_js_1.default(0))) {\r\n                        const safetyDeposit = boxes[s.info.order.toNumber()];\r\n                        const metadata = metadataByMint[safetyDeposit.info.tokenMint];\r\n                        newWinnerArr.push({\r\n                            metadata,\r\n                            winningConfigType: s.info.winningConfigType,\r\n                            safetyDeposit,\r\n                            amount,\r\n                            masterEdition: ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.info) === null || _a === void 0 ? void 0 : _a.masterEdition)\r\n                                ? masterEditions[metadata.info.masterEdition]\r\n                                : undefined,\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            return items;\r\n        }\r\n    }\r\n}\r\nexports.AuctionManager = AuctionManager;\r\nclass AuctionManagerV2 {\r\n    constructor(args) {\r\n        this.key = MetaplexKey.AuctionManagerV2;\r\n        this.store = args.store;\r\n        this.authority = args.authority;\r\n        this.auction = args.auction;\r\n        this.vault = args.vault;\r\n        this.acceptPayment = args.acceptPayment;\r\n        this.state = args.state;\r\n        const auction = utils_1.programIds().auction;\r\n        actions_1.getAuctionExtended({\r\n            auctionProgramId: auction,\r\n            resource: this.vault,\r\n        }).then(val => (this.auctionDataExtended = val));\r\n    }\r\n}\r\nexports.AuctionManagerV2 = AuctionManagerV2;\r\nclass AuctionManagerStateV2 {\r\n    constructor(args) {\r\n        this.status = AuctionManagerStatus.Initialized;\r\n        this.safetyConfigItemsValidated = new bn_js_1.default(0);\r\n        this.bidsPushedToAcceptPayment = new bn_js_1.default(0);\r\n        this.hasParticipation = false;\r\n        Object.assign(this, args);\r\n    }\r\n}\r\nexports.AuctionManagerStateV2 = AuctionManagerStateV2;\r\nclass ParticipationStateV2 {\r\n    constructor(args) {\r\n        this.collectedToAcceptPayment = new bn_js_1.default(0);\r\n        Object.assign(this, args);\r\n    }\r\n}\r\nexports.ParticipationStateV2 = ParticipationStateV2;\r\nclass ParticipationConfigV2 {\r\n    constructor(args) {\r\n        this.winnerConstraint = WinningConstraint.NoParticipationPrize;\r\n        this.nonWinningConstraint = NonWinningConstraint.GivenForFixedPrice;\r\n        this.fixedPrice = new bn_js_1.default(0);\r\n        Object.assign(this, args);\r\n    }\r\n}\r\nexports.ParticipationConfigV2 = ParticipationConfigV2;\r\nclass RedeemBidArgs {\r\n    constructor() {\r\n        this.instruction = 2;\r\n    }\r\n}\r\nexports.RedeemBidArgs = RedeemBidArgs;\r\nclass RedeemFullRightsTransferBidArgs {\r\n    constructor() {\r\n        this.instruction = 3;\r\n    }\r\n}\r\nexports.RedeemFullRightsTransferBidArgs = RedeemFullRightsTransferBidArgs;\r\nclass StartAuctionArgs {\r\n    constructor() {\r\n        this.instruction = 5;\r\n    }\r\n}\r\nexports.StartAuctionArgs = StartAuctionArgs;\r\nclass EndAuctionArgs {\r\n    constructor(args) {\r\n        this.instruction = 20;\r\n        this.reveal = args.reveal;\r\n    }\r\n}\r\nexports.EndAuctionArgs = EndAuctionArgs;\r\nclass ClaimBidArgs {\r\n    constructor() {\r\n        this.instruction = 6;\r\n    }\r\n}\r\nexports.ClaimBidArgs = ClaimBidArgs;\r\nvar ProxyCallAddress;\r\n(function (ProxyCallAddress) {\r\n    ProxyCallAddress[ProxyCallAddress[\"RedeemBid\"] = 0] = \"RedeemBid\";\r\n    ProxyCallAddress[ProxyCallAddress[\"RedeemFullRightsTransferBid\"] = 1] = \"RedeemFullRightsTransferBid\";\r\n})(ProxyCallAddress = exports.ProxyCallAddress || (exports.ProxyCallAddress = {}));\r\nclass RedeemUnusedWinningConfigItemsAsAuctioneerArgs {\r\n    constructor(args) {\r\n        this.instruction = 12;\r\n        this.winningConfigItemIndex = args.winningConfigItemIndex;\r\n        this.proxyCall = args.proxyCall;\r\n    }\r\n}\r\nexports.RedeemUnusedWinningConfigItemsAsAuctioneerArgs = RedeemUnusedWinningConfigItemsAsAuctioneerArgs;\r\nclass EmptyPaymentAccountArgs {\r\n    constructor(args) {\r\n        this.instruction = 7;\r\n        this.winningConfigIndex = args.winningConfigIndex;\r\n        this.winningConfigItemIndex = args.winningConfigItemIndex;\r\n        this.creatorIndex = args.creatorIndex;\r\n    }\r\n}\r\nexports.EmptyPaymentAccountArgs = EmptyPaymentAccountArgs;\r\nclass SetStoreArgs {\r\n    constructor(args) {\r\n        this.instruction = 8;\r\n        this.public = args.public;\r\n    }\r\n}\r\nexports.SetStoreArgs = SetStoreArgs;\r\nclass SetWhitelistedCreatorArgs {\r\n    constructor(args) {\r\n        this.instruction = 9;\r\n        this.activated = args.activated;\r\n    }\r\n}\r\nexports.SetWhitelistedCreatorArgs = SetWhitelistedCreatorArgs;\r\nclass DecommissionAuctionManagerArgs {\r\n    constructor() {\r\n        this.instruction = 13;\r\n    }\r\n}\r\nexports.DecommissionAuctionManagerArgs = DecommissionAuctionManagerArgs;\r\nclass RedeemPrintingV2BidArgs {\r\n    constructor(args) {\r\n        this.instruction = 14;\r\n        this.editionOffset = args.editionOffset;\r\n        this.winIndex = args.winIndex;\r\n    }\r\n}\r\nexports.RedeemPrintingV2BidArgs = RedeemPrintingV2BidArgs;\r\nclass WithdrawMasterEditionArgs {\r\n    constructor() {\r\n        this.instruction = 15;\r\n    }\r\n}\r\nexports.WithdrawMasterEditionArgs = WithdrawMasterEditionArgs;\r\nclass RedeemParticipationBidV3Args {\r\n    constructor(args) {\r\n        this.instruction = 19;\r\n        this.winIndex = args.winIndex;\r\n    }\r\n}\r\nexports.RedeemParticipationBidV3Args = RedeemParticipationBidV3Args;\r\nclass SetStoreIndexArgs {\r\n    constructor(args) {\r\n        this.instruction = 21;\r\n        this.page = args.page;\r\n        this.offset = args.offset;\r\n    }\r\n}\r\nexports.SetStoreIndexArgs = SetStoreIndexArgs;\r\nclass SetAuctionCacheArgs {\r\n    constructor() {\r\n        this.instruction = 22;\r\n    }\r\n}\r\nexports.SetAuctionCacheArgs = SetAuctionCacheArgs;\r\nvar WinningConstraint;\r\n(function (WinningConstraint) {\r\n    WinningConstraint[WinningConstraint[\"NoParticipationPrize\"] = 0] = \"NoParticipationPrize\";\r\n    WinningConstraint[WinningConstraint[\"ParticipationPrizeGiven\"] = 1] = \"ParticipationPrizeGiven\";\r\n})(WinningConstraint = exports.WinningConstraint || (exports.WinningConstraint = {}));\r\nvar NonWinningConstraint;\r\n(function (NonWinningConstraint) {\r\n    NonWinningConstraint[NonWinningConstraint[\"NoParticipationPrize\"] = 0] = \"NoParticipationPrize\";\r\n    NonWinningConstraint[NonWinningConstraint[\"GivenForFixedPrice\"] = 1] = \"GivenForFixedPrice\";\r\n    NonWinningConstraint[NonWinningConstraint[\"GivenForBidPrice\"] = 2] = \"GivenForBidPrice\";\r\n})(NonWinningConstraint = exports.NonWinningConstraint || (exports.NonWinningConstraint = {}));\r\nvar WinningConfigType;\r\n(function (WinningConfigType) {\r\n    /// You may be selling your one-of-a-kind NFT for the first time, but not it's accompanying Metadata,\r\n    /// of which you would like to retain ownership. You get 100% of the payment the first sale, then\r\n    /// royalties forever after.\r\n    ///\r\n    /// You may be re-selling something like a Limited/Open Edition print from another auction,\r\n    /// a master edition record token by itself (Without accompanying metadata/printing ownership), etc.\r\n    /// This means artists will get royalty fees according to the top level royalty % on the metadata\r\n    /// split according to their percentages of contribution.\r\n    ///\r\n    /// No metadata ownership is transferred in this instruction, which means while you may be transferring\r\n    /// the token for a limited/open edition away, you would still be (nominally) the owner of the limited edition\r\n    /// metadata, though it confers no rights or privileges of any kind.\r\n    WinningConfigType[WinningConfigType[\"TokenOnlyTransfer\"] = 0] = \"TokenOnlyTransfer\";\r\n    /// Means you are auctioning off the master edition record and it's metadata ownership as well as the\r\n    /// token itself. The other person will be able to mint authorization tokens and make changes to the\r\n    /// artwork.\r\n    WinningConfigType[WinningConfigType[\"FullRightsTransfer\"] = 1] = \"FullRightsTransfer\";\r\n    /// Means you are using authorization tokens to print off editions during the auction using\r\n    /// from a MasterEditionV1\r\n    WinningConfigType[WinningConfigType[\"PrintingV1\"] = 2] = \"PrintingV1\";\r\n    /// Means you are using the MasterEditionV2 to print off editions\r\n    WinningConfigType[WinningConfigType[\"PrintingV2\"] = 3] = \"PrintingV2\";\r\n    /// Means you are using a MasterEditionV2 as a participation prize.\r\n    WinningConfigType[WinningConfigType[\"Participation\"] = 4] = \"Participation\";\r\n})(WinningConfigType = exports.WinningConfigType || (exports.WinningConfigType = {}));\r\nconst decodeStoreIndexer = (buffer) => {\r\n    return borsh_1.deserializeUnchecked(exports.SCHEMA, StoreIndexer, buffer);\r\n};\r\nexports.decodeStoreIndexer = decodeStoreIndexer;\r\nconst decodeAuctionCache = (buffer) => {\r\n    return borsh_1.deserializeUnchecked(exports.SCHEMA, AuctionCache, buffer);\r\n};\r\nexports.decodeAuctionCache = decodeAuctionCache;\r\nconst decodePrizeTrackingTicket = (buffer) => {\r\n    return borsh_1.deserializeUnchecked(exports.SCHEMA, PrizeTrackingTicket, buffer);\r\n};\r\nexports.decodePrizeTrackingTicket = decodePrizeTrackingTicket;\r\nconst decodeWhitelistedCreator = (buffer) => {\r\n    return borsh_1.deserializeUnchecked(exports.SCHEMA, WhitelistedCreator, buffer);\r\n};\r\nexports.decodeWhitelistedCreator = decodeWhitelistedCreator;\r\nconst WhitelistedCreatorParser = (pubkey, account) => ({\r\n    pubkey,\r\n    account,\r\n    info: exports.decodeWhitelistedCreator(account.data),\r\n});\r\nexports.WhitelistedCreatorParser = WhitelistedCreatorParser;\r\nconst decodeStore = (buffer) => {\r\n    return borsh_1.deserializeUnchecked(exports.SCHEMA, Store, buffer);\r\n};\r\nexports.decodeStore = decodeStore;\r\nconst decodeAuctionManager = (buffer) => {\r\n    return buffer[0] == MetaplexKey.AuctionManagerV1\r\n        ? borsh_1.deserializeUnchecked(exports.SCHEMA, deprecatedStates_1.AuctionManagerV1, buffer)\r\n        : borsh_1.deserializeUnchecked(exports.SCHEMA, AuctionManagerV2, buffer);\r\n};\r\nexports.decodeAuctionManager = decodeAuctionManager;\r\nconst decodeBidRedemptionTicket = (buffer) => {\r\n    return (buffer[0] == MetaplexKey.BidRedemptionTicketV1\r\n        ? borsh_1.deserializeUnchecked(exports.SCHEMA, deprecatedStates_1.BidRedemptionTicketV1, buffer)\r\n        : new BidRedemptionTicketV2({\r\n            key: MetaplexKey.BidRedemptionTicketV2,\r\n            data: buffer.toJSON().data,\r\n        }));\r\n};\r\nexports.decodeBidRedemptionTicket = decodeBidRedemptionTicket;\r\nconst decodeSafetyDepositConfig = (buffer) => {\r\n    return new SafetyDepositConfig({\r\n        data: buffer,\r\n    });\r\n};\r\nexports.decodeSafetyDepositConfig = decodeSafetyDepositConfig;\r\nconst decodePayoutTicket = (buffer) => {\r\n    return borsh_1.deserializeUnchecked(exports.SCHEMA, PayoutTicket, buffer);\r\n};\r\nexports.decodePayoutTicket = decodePayoutTicket;\r\nclass WhitelistedCreator {\r\n    constructor(args) {\r\n        this.key = MetaplexKey.WhitelistedCreatorV1;\r\n        this.activated = true;\r\n        this.address = args.address;\r\n        this.activated = args.activated;\r\n    }\r\n}\r\nexports.WhitelistedCreator = WhitelistedCreator;\r\nclass Store {\r\n    constructor(args) {\r\n        this.key = MetaplexKey.StoreV1;\r\n        this.public = true;\r\n        this.key = MetaplexKey.StoreV1;\r\n        this.public = args.public;\r\n        this.auctionProgram = args.auctionProgram;\r\n        this.tokenVaultProgram = args.tokenVaultProgram;\r\n        this.tokenMetadataProgram = args.tokenMetadataProgram;\r\n        this.tokenProgram = args.tokenProgram;\r\n    }\r\n}\r\nexports.Store = Store;\r\nclass BidRedemptionTicketV2 {\r\n    constructor(args) {\r\n        this.key = MetaplexKey.BidRedemptionTicketV2;\r\n        this.data = [];\r\n        Object.assign(this, args);\r\n        let offset = 2;\r\n        if (this.data[1] == 0) {\r\n            this.winnerIndex = null;\r\n        }\r\n        else {\r\n            this.winnerIndex = new bn_js_1.default(this.data.slice(2, 8), 'le');\r\n            offset += 8;\r\n        }\r\n        this.auctionManager = bs58_1.default.encode(this.data.slice(offset, offset + 32));\r\n    }\r\n    getBidRedeemed(order) {\r\n        let offset = 42;\r\n        if (this.data[1] == 0) {\r\n            offset -= 8;\r\n        }\r\n        const index = Math.floor(order / 8) + offset;\r\n        const positionFromRight = 7 - (order % 8);\r\n        const mask = Math.pow(2, positionFromRight);\r\n        const appliedMask = this.data[index] & mask;\r\n        return appliedMask != 0;\r\n    }\r\n}\r\nexports.BidRedemptionTicketV2 = BidRedemptionTicketV2;\r\nvar AuctionManagerStatus;\r\n(function (AuctionManagerStatus) {\r\n    AuctionManagerStatus[AuctionManagerStatus[\"Initialized\"] = 0] = \"Initialized\";\r\n    AuctionManagerStatus[AuctionManagerStatus[\"Validated\"] = 1] = \"Validated\";\r\n    AuctionManagerStatus[AuctionManagerStatus[\"Running\"] = 2] = \"Running\";\r\n    AuctionManagerStatus[AuctionManagerStatus[\"Disbursing\"] = 3] = \"Disbursing\";\r\n    AuctionManagerStatus[AuctionManagerStatus[\"Finished\"] = 4] = \"Finished\";\r\n})(AuctionManagerStatus = exports.AuctionManagerStatus || (exports.AuctionManagerStatus = {}));\r\nvar TupleNumericType;\r\n(function (TupleNumericType) {\r\n    TupleNumericType[TupleNumericType[\"U8\"] = 1] = \"U8\";\r\n    TupleNumericType[TupleNumericType[\"U16\"] = 2] = \"U16\";\r\n    TupleNumericType[TupleNumericType[\"U32\"] = 4] = \"U32\";\r\n    TupleNumericType[TupleNumericType[\"U64\"] = 8] = \"U64\";\r\n})(TupleNumericType = exports.TupleNumericType || (exports.TupleNumericType = {}));\r\nclass AmountRange {\r\n    constructor(args) {\r\n        this.amount = args.amount;\r\n        this.length = args.length;\r\n    }\r\n}\r\nexports.AmountRange = AmountRange;\r\nclass InitAuctionManagerV2Args {\r\n    constructor(args) {\r\n        this.instruction = 17;\r\n        this.amountType = TupleNumericType.U8;\r\n        this.lengthType = TupleNumericType.U8;\r\n        this.maxRanges = new bn_js_1.default(1);\r\n        this.amountType = args.amountType;\r\n        this.lengthType = args.lengthType;\r\n        this.maxRanges = args.maxRanges;\r\n    }\r\n}\r\nexports.InitAuctionManagerV2Args = InitAuctionManagerV2Args;\r\nclass SafetyDepositConfig {\r\n    constructor(args) {\r\n        this.key = MetaplexKey.SafetyDepositConfigV1;\r\n        this.auctionManager = web3_js_1.SystemProgram.programId.toBase58();\r\n        this.order = new bn_js_1.default(0);\r\n        this.winningConfigType = WinningConfigType.PrintingV2;\r\n        this.amountType = TupleNumericType.U8;\r\n        this.lengthType = TupleNumericType.U8;\r\n        this.amountRanges = [];\r\n        this.participationConfig = null;\r\n        this.participationState = null;\r\n        if (args.directArgs) {\r\n            Object.assign(this, args.directArgs);\r\n        }\r\n        else if (args.data) {\r\n            this.auctionManager = bs58_1.default.encode(args.data.slice(1, 33));\r\n            this.order = new bn_js_1.default(args.data.slice(33, 41), 'le');\r\n            this.winningConfigType = args.data[41];\r\n            this.amountType = args.data[42];\r\n            this.lengthType = args.data[43];\r\n            const lengthOfArray = new bn_js_1.default(args.data.slice(44, 48), 'le');\r\n            this.amountRanges = [];\r\n            let offset = 48;\r\n            for (let i = 0; i < lengthOfArray.toNumber(); i++) {\r\n                const amount = this.getBNFromData(args.data, offset, this.amountType);\r\n                offset += this.amountType;\r\n                const length = this.getBNFromData(args.data, offset, this.lengthType);\r\n                offset += this.lengthType;\r\n                this.amountRanges.push(new AmountRange({ amount, length }));\r\n            }\r\n            if (args.data[offset] == 0) {\r\n                offset += 1;\r\n                this.participationConfig = null;\r\n            }\r\n            else {\r\n                // pick up participation config manually\r\n                const winnerConstraintAsNumber = args.data[offset + 1];\r\n                const nonWinnerConstraintAsNumber = args.data[offset + 2];\r\n                let fixedPrice = null;\r\n                offset += 3;\r\n                if (args.data[offset] == 1) {\r\n                    fixedPrice = new bn_js_1.default(args.data.slice(offset + 1, offset + 9), 'le');\r\n                    offset += 9;\r\n                }\r\n                else {\r\n                    offset += 1;\r\n                }\r\n                this.participationConfig = new ParticipationConfigV2({\r\n                    winnerConstraint: winnerConstraintAsNumber,\r\n                    nonWinningConstraint: nonWinnerConstraintAsNumber,\r\n                    fixedPrice: fixedPrice,\r\n                });\r\n            }\r\n            if (args.data[offset] == 0) {\r\n                offset += 1;\r\n                this.participationState = null;\r\n            }\r\n            else {\r\n                // pick up participation state manually\r\n                const collectedToAcceptPayment = new bn_js_1.default(args.data.slice(offset + 1, offset + 9), 'le');\r\n                offset += 9;\r\n                this.participationState = new ParticipationStateV2({\r\n                    collectedToAcceptPayment,\r\n                });\r\n            }\r\n        }\r\n    }\r\n    getBNFromData(data, offset, dataType) {\r\n        switch (dataType) {\r\n            case TupleNumericType.U8:\r\n                return new bn_js_1.default(data[offset], 'le');\r\n            case TupleNumericType.U16:\r\n                return new bn_js_1.default(data.slice(offset, offset + 2), 'le');\r\n            case TupleNumericType.U32:\r\n                return new bn_js_1.default(data.slice(offset, offset + 4), 'le');\r\n            case TupleNumericType.U64:\r\n                return new bn_js_1.default(data.slice(offset, offset + 8), 'le');\r\n        }\r\n    }\r\n    getAmountForWinner(winner) {\r\n        let start = new bn_js_1.default(0);\r\n        for (let i = 0; i < this.amountRanges.length; i++) {\r\n            const end = start.add(this.amountRanges[i].length);\r\n            if (winner.gte(start) && winner.lt(end)) {\r\n                return this.amountRanges[i].amount;\r\n            }\r\n            start = end;\r\n        }\r\n        return new bn_js_1.default(0);\r\n    }\r\n}\r\nexports.SafetyDepositConfig = SafetyDepositConfig;\r\nclass ValidateSafetyDepositBoxV2Args {\r\n    constructor(safetyDeposit) {\r\n        this.instruction = 18;\r\n        this.safetyDepositConfig = safetyDeposit;\r\n    }\r\n}\r\nexports.ValidateSafetyDepositBoxV2Args = ValidateSafetyDepositBoxV2Args;\r\nexports.SCHEMA = new Map([\r\n    ...deprecatedStates_1.DEPRECATED_SCHEMA,\r\n    [\r\n        StoreIndexer,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['store', 'pubkeyAsString'],\r\n                ['page', 'u64'],\r\n                ['auctionCaches', ['pubkeyAsString']],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        AuctionCache,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['store', 'pubkeyAsString'],\r\n                ['timestamp', 'u64'],\r\n                ['metadata', ['pubkeyAsString']],\r\n                ['auction', 'pubkeyAsString'],\r\n                ['vault', 'pubkeyAsString'],\r\n                ['auctionManager', 'pubkeyAsString'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        PrizeTrackingTicket,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['metadata', 'pubkeyAsString'],\r\n                ['supplySnapshot', 'u64'],\r\n                ['expectedRedemptions', 'u64'],\r\n                ['redemptions', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        AuctionManagerV2,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['store', 'pubkeyAsString'],\r\n                ['authority', 'pubkeyAsString'],\r\n                ['auction', 'pubkeyAsString'],\r\n                ['vault', 'pubkeyAsString'],\r\n                ['acceptPayment', 'pubkeyAsString'],\r\n                ['state', AuctionManagerStateV2],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        ParticipationConfigV2,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['winnerConstraint', 'u8'],\r\n                ['nonWinningConstraint', 'u8'],\r\n                ['fixedPrice', { kind: 'option', type: 'u64' }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        WhitelistedCreator,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['address', 'pubkeyAsString'],\r\n                ['activated', 'u8'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        Store,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['public', 'u8'],\r\n                ['auctionProgram', 'pubkeyAsString'],\r\n                ['tokenVaultProgram', 'pubkeyAsString'],\r\n                ['tokenMetadataProgram', 'pubkeyAsString'],\r\n                ['tokenProgram', 'pubkeyAsString'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        AuctionManagerStateV2,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['status', 'u8'],\r\n                ['safetyConfigItemsValidated', 'u64'],\r\n                ['bidsPushedToAcceptPayment', 'u64'],\r\n                ['hasParticipation', 'u8'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        ParticipationStateV2,\r\n        {\r\n            kind: 'struct',\r\n            fields: [['collectedToAcceptPayment', 'u64']],\r\n        },\r\n    ],\r\n    [\r\n        PayoutTicket,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['recipient', 'pubkeyAsString'],\r\n                ['amountPaid', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        AmountRange,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['amount', 'u64'],\r\n                ['length', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        SafetyDepositConfig,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['auctionManager', 'pubkeyAsString'],\r\n                ['order', 'u64'],\r\n                ['winningConfigType', 'u8'],\r\n                ['amountType', 'u8'],\r\n                ['lengthType', 'u8'],\r\n                ['amountRanges', [AmountRange]],\r\n                [\r\n                    'participationConfig',\r\n                    { kind: 'option', type: ParticipationConfigV2 },\r\n                ],\r\n                ['participationState', { kind: 'option', type: ParticipationStateV2 }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        RedeemUnusedWinningConfigItemsAsAuctioneerArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['winningConfigItemIndex', 'u8'],\r\n                ['proxyCall', 'u8'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        DecommissionAuctionManagerArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [['instruction', 'u8']],\r\n        },\r\n    ],\r\n    [\r\n        RedeemPrintingV2BidArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['editionOffset', 'u64'],\r\n                ['winIndex', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        WithdrawMasterEditionArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [['instruction', 'u8']],\r\n        },\r\n    ],\r\n    [\r\n        RedeemParticipationBidV3Args,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['winIndex', { kind: 'option', type: 'u64' }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        InitAuctionManagerV2Args,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['amountType', 'u8'],\r\n                ['lengthType', 'u8'],\r\n                ['maxRanges', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        ValidateSafetyDepositBoxV2Args,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['safetyDepositConfig', SafetyDepositConfig],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        RedeemBidArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [['instruction', 'u8']],\r\n        },\r\n    ],\r\n    [\r\n        RedeemFullRightsTransferBidArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [['instruction', 'u8']],\r\n        },\r\n    ],\r\n    [\r\n        StartAuctionArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [['instruction', 'u8']],\r\n        },\r\n    ],\r\n    [\r\n        EndAuctionArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['reveal', { kind: 'option', type: [bn_js_1.default] }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        ClaimBidArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [['instruction', 'u8']],\r\n        },\r\n    ],\r\n    [\r\n        SetAuctionCacheArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [['instruction', 'u8']],\r\n        },\r\n    ],\r\n    [\r\n        SetStoreIndexArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['page', 'u64'],\r\n                ['offset', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        EmptyPaymentAccountArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['winningConfigIndex', { kind: 'option', type: 'u8' }],\r\n                ['winningConfigItemIndex', { kind: 'option', type: 'u8' }],\r\n                ['creatorIndex', { kind: 'option', type: 'u8' }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        SetStoreArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['public', 'u8'], //bool\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        SetWhitelistedCreatorArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['activated', 'u8'], //bool\r\n            ],\r\n        },\r\n    ],\r\n]);\r\nasync function getAuctionManagerKey(vault, auctionKey) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    return (await utils_1.findProgramAddress([Buffer.from(exports.METAPLEX_PREFIX), utils_1.toPublicKey(auctionKey).toBuffer()], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\r\n}\r\nexports.getAuctionManagerKey = getAuctionManagerKey;\r\nasync function getAuctionKeys(vault) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    const auctionKey = (await utils_1.findProgramAddress([\r\n        Buffer.from(actions_1.AUCTION_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.auction).toBuffer(),\r\n        utils_1.toPublicKey(vault).toBuffer(),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.auction)))[0];\r\n    const auctionManagerKey = await getAuctionManagerKey(vault, auctionKey);\r\n    return { auctionKey, auctionManagerKey };\r\n}\r\nexports.getAuctionKeys = getAuctionKeys;\r\nasync function getBidRedemption(auctionKey, bidMetadata) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METAPLEX_PREFIX),\r\n        utils_1.toPublicKey(auctionKey).toBuffer(),\r\n        utils_1.toPublicKey(bidMetadata).toBuffer(),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\r\n}\r\nexports.getBidRedemption = getBidRedemption;\r\nasync function getBidderKeys(auctionKey, bidder) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    const bidMetadata = (await utils_1.findProgramAddress([\r\n        Buffer.from(actions_1.AUCTION_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.auction).toBuffer(),\r\n        utils_1.toPublicKey(auctionKey).toBuffer(),\r\n        utils_1.toPublicKey(bidder).toBuffer(),\r\n        Buffer.from(actions_1.METADATA),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.auction)))[0];\r\n    const bidRedemption = await getBidRedemption(auctionKey, bidMetadata);\r\n    return { bidMetadata, bidRedemption };\r\n}\r\nexports.getBidderKeys = getBidderKeys;\r\nasync function getOriginalAuthority(auctionKey, metadata) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METAPLEX_PREFIX),\r\n        utils_1.toPublicKey(auctionKey).toBuffer(),\r\n        utils_1.toPublicKey(metadata).toBuffer(),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\r\n}\r\nexports.getOriginalAuthority = getOriginalAuthority;\r\nconst isCreatorPartOfTheStore = async (creatorAddress, pubkey, store) => {\r\n    const creatorKeyInStore = await getWhitelistedCreator(creatorAddress, store);\r\n    return creatorKeyInStore === pubkey;\r\n};\r\nexports.isCreatorPartOfTheStore = isCreatorPartOfTheStore;\r\nasync function getWhitelistedCreator(creator, storeId) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    const store = storeId || PROGRAM_IDS.store;\r\n    if (!store) {\r\n        throw new Error('Store not initialized');\r\n    }\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METAPLEX_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(),\r\n        utils_1.toPublicKey(store).toBuffer(),\r\n        utils_1.toPublicKey(creator).toBuffer(),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\r\n}\r\nexports.getWhitelistedCreator = getWhitelistedCreator;\r\nasync function getPrizeTrackingTicket(auctionManager, mint) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    const store = PROGRAM_IDS.store;\r\n    if (!store) {\r\n        throw new Error('Store not initialized');\r\n    }\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METAPLEX_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(),\r\n        utils_1.toPublicKey(auctionManager).toBuffer(),\r\n        utils_1.toPublicKey(mint).toBuffer(),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\r\n}\r\nexports.getPrizeTrackingTicket = getPrizeTrackingTicket;\r\nasync function getAuctionWinnerTokenTypeTracker(auctionManager) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    const store = PROGRAM_IDS.store;\r\n    if (!store) {\r\n        throw new Error('Store not initialized');\r\n    }\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METAPLEX_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(),\r\n        utils_1.toPublicKey(auctionManager).toBuffer(),\r\n        Buffer.from(exports.TOTALS),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\r\n}\r\nexports.getAuctionWinnerTokenTypeTracker = getAuctionWinnerTokenTypeTracker;\r\nasync function getSafetyDepositConfig(auctionManager, safetyDeposit) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    const store = PROGRAM_IDS.store;\r\n    if (!store) {\r\n        throw new Error('Store not initialized');\r\n    }\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METAPLEX_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(),\r\n        utils_1.toPublicKey(auctionManager).toBuffer(),\r\n        utils_1.toPublicKey(safetyDeposit).toBuffer(),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\r\n}\r\nexports.getSafetyDepositConfig = getSafetyDepositConfig;\r\nasync function getStoreIndexer(page) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    const store = PROGRAM_IDS.store;\r\n    if (!store) {\r\n        throw new Error('Store not initialized');\r\n    }\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METAPLEX_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(),\r\n        utils_1.toPublicKey(store).toBuffer(),\r\n        Buffer.from(exports.INDEX),\r\n        Buffer.from(page.toString()),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\r\n}\r\nexports.getStoreIndexer = getStoreIndexer;\r\nasync function getAuctionCache(auction) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    const store = PROGRAM_IDS.store;\r\n    if (!store) {\r\n        throw new Error('Store not initialized');\r\n    }\r\n    console.log('Auction', auction);\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METAPLEX_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.metaplex).toBuffer(),\r\n        utils_1.toPublicKey(store).toBuffer(),\r\n        utils_1.toPublicKey(auction).toBuffer(),\r\n        Buffer.from(exports.CACHE),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\r\n}\r\nexports.getAuctionCache = getAuctionCache;\r\nasync function getPayoutTicket(auctionManager, winnerConfigIndex, winnerConfigItemIndex, creatorIndex, safetyDepositBox, recipient) {\r\n    const PROGRAM_IDS = utils_1.programIds();\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METAPLEX_PREFIX),\r\n        utils_1.toPublicKey(auctionManager).toBuffer(),\r\n        Buffer.from(winnerConfigIndex !== null && winnerConfigIndex !== undefined\r\n            ? winnerConfigIndex.toString()\r\n            : 'participation'),\r\n        Buffer.from(winnerConfigItemIndex !== null && winnerConfigItemIndex !== undefined\r\n            ? winnerConfigItemIndex.toString()\r\n            : '0'),\r\n        Buffer.from(creatorIndex !== null && creatorIndex !== undefined\r\n            ? creatorIndex.toString()\r\n            : 'auctioneer'),\r\n        utils_1.toPublicKey(safetyDepositBox).toBuffer(),\r\n        utils_1.toPublicKey(recipient).toBuffer(),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metaplex)))[0];\r\n}\r\nexports.getPayoutTicket = getPayoutTicket;\r\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}