{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEditionMarkPda = exports.deprecatedGetReservationList = exports.getMetadata = exports.getEdition = exports.convertMasterEditionV1ToV2 = exports.deprecatedMintPrintingTokens = exports.signMetadata = exports.deprecatedCreateReservationList = exports.updatePrimarySaleHappenedViaToken = exports.mintNewEditionFromMasterEditionViaToken = exports.deprecatedMintNewEditionFromMasterEditionViaPrintingToken = exports.createMasterEdition = exports.createMetadata = exports.updateMetadata = exports.decodeMasterEdition = exports.decodeEdition = exports.decodeEditionMarker = exports.decodeMetadata = exports.METADATA_SCHEMA = exports.Metadata = exports.Data = exports.Creator = exports.Edition = exports.EditionMarker = exports.MasterEditionV2 = exports.MasterEditionV1 = exports.MetadataCategory = exports.MetadataKey = exports.EDITION_MARKER_BIT_SIZE = exports.MAX_EDITION_LEN = exports.MAX_METADATA_LEN = exports.MAX_CREATOR_LEN = exports.MAX_CREATOR_LIMIT = exports.MAX_URI_LENGTH = exports.MAX_SYMBOL_LENGTH = exports.MAX_NAME_LENGTH = exports.RESERVATION = exports.EDITION = exports.METADATA_PREFIX = void 0;\n\nconst web3_js_1 = require(\"@solana/web3.js\");\n\nconst programIds_1 = require(\"../utils/programIds\");\n\nconst borsh_1 = require(\"borsh\");\n\nconst utils_1 = require(\"../utils\");\n\nexports.METADATA_PREFIX = 'metadata';\nexports.EDITION = 'edition';\nexports.RESERVATION = 'reservation';\nexports.MAX_NAME_LENGTH = 32;\nexports.MAX_SYMBOL_LENGTH = 10;\nexports.MAX_URI_LENGTH = 200;\nexports.MAX_CREATOR_LIMIT = 5;\nexports.MAX_CREATOR_LEN = 32 + 1 + 1;\nexports.MAX_METADATA_LEN = 1 + 32 + 32 + exports.MAX_NAME_LENGTH + exports.MAX_SYMBOL_LENGTH + exports.MAX_URI_LENGTH + exports.MAX_CREATOR_LIMIT * exports.MAX_CREATOR_LEN + 2 + 1 + 1 + 198;\nexports.MAX_EDITION_LEN = 1 + 32 + 8 + 200;\nexports.EDITION_MARKER_BIT_SIZE = 248;\nvar MetadataKey;\n\n(function (MetadataKey) {\n  MetadataKey[MetadataKey[\"Uninitialized\"] = 0] = \"Uninitialized\";\n  MetadataKey[MetadataKey[\"MetadataV1\"] = 4] = \"MetadataV1\";\n  MetadataKey[MetadataKey[\"EditionV1\"] = 1] = \"EditionV1\";\n  MetadataKey[MetadataKey[\"MasterEditionV1\"] = 2] = \"MasterEditionV1\";\n  MetadataKey[MetadataKey[\"MasterEditionV2\"] = 6] = \"MasterEditionV2\";\n  MetadataKey[MetadataKey[\"EditionMarker\"] = 7] = \"EditionMarker\";\n})(MetadataKey = exports.MetadataKey || (exports.MetadataKey = {}));\n\nvar MetadataCategory;\n\n(function (MetadataCategory) {\n  MetadataCategory[\"Audio\"] = \"audio\";\n  MetadataCategory[\"Video\"] = \"video\";\n  MetadataCategory[\"Image\"] = \"image\";\n  MetadataCategory[\"VR\"] = \"vr\";\n  MetadataCategory[\"HTML\"] = \"html\";\n})(MetadataCategory = exports.MetadataCategory || (exports.MetadataCategory = {}));\n\nclass MasterEditionV1 {\n  constructor(args) {\n    this.key = MetadataKey.MasterEditionV1;\n    this.supply = args.supply;\n    this.maxSupply = args.maxSupply;\n    this.printingMint = args.printingMint;\n    this.oneTimePrintingAuthorizationMint = args.oneTimePrintingAuthorizationMint;\n  }\n\n}\n\nexports.MasterEditionV1 = MasterEditionV1;\n\nclass MasterEditionV2 {\n  constructor(args) {\n    this.key = MetadataKey.MasterEditionV2;\n    this.supply = args.supply;\n    this.maxSupply = args.maxSupply;\n  }\n\n}\n\nexports.MasterEditionV2 = MasterEditionV2;\n\nclass EditionMarker {\n  constructor(args) {\n    this.key = MetadataKey.EditionMarker;\n    this.ledger = args.ledger;\n  }\n\n  editionTaken(edition) {\n    const editionOffset = edition % exports.EDITION_MARKER_BIT_SIZE;\n    const indexOffset = Math.floor(editionOffset / 8);\n\n    if (indexOffset > 30) {\n      throw Error('bad index for edition');\n    }\n\n    const positionInBitsetFromRight = 7 - editionOffset % 8;\n    const mask = Math.pow(2, positionInBitsetFromRight);\n    const appliedMask = this.ledger[indexOffset] & mask;\n    return appliedMask != 0;\n  }\n\n}\n\nexports.EditionMarker = EditionMarker;\n\nclass Edition {\n  constructor(args) {\n    this.key = MetadataKey.EditionV1;\n    this.parent = args.parent;\n    this.edition = args.edition;\n  }\n\n}\n\nexports.Edition = Edition;\n\nclass Creator {\n  constructor(args) {\n    this.address = args.address;\n    this.verified = args.verified;\n    this.share = args.share;\n  }\n\n}\n\nexports.Creator = Creator;\n\nclass Data {\n  constructor(args) {\n    this.name = args.name;\n    this.symbol = args.symbol;\n    this.uri = args.uri;\n    this.sellerFeeBasisPoints = args.sellerFeeBasisPoints;\n    this.creators = args.creators;\n  }\n\n}\n\nexports.Data = Data;\n\nclass Metadata {\n  constructor(args) {\n    var _a;\n\n    this.key = MetadataKey.MetadataV1;\n    this.updateAuthority = args.updateAuthority;\n    this.mint = args.mint;\n    this.data = args.data;\n    this.primarySaleHappened = args.primarySaleHappened;\n    this.isMutable = args.isMutable;\n    this.editionNonce = (_a = args.editionNonce) !== null && _a !== void 0 ? _a : null;\n  }\n\n  async init() {\n    //const metadata = toPublicKey(programIds().metadata);\n\n    /*\r\n    This nonce stuff doesnt work - we are doing something wrong here. TODO fix.\r\n    if (this.editionNonce !== null) {\r\n      this.edition = (\r\n        await PublicKey.createProgramAddress(\r\n          [\r\n            Buffer.from(METADATA_PREFIX),\r\n            metadata.toBuffer(),\r\n            toPublicKey(this.mint).toBuffer(),\r\n            new Uint8Array([this.editionNonce || 0]),\r\n          ],\r\n          metadata,\r\n        )\r\n      ).toBase58();\r\n    } else {*/\n    this.edition = await getEdition(this.mint); //}\n\n    this.masterEdition = this.edition;\n  }\n\n}\n\nexports.Metadata = Metadata;\n\nclass CreateMetadataArgs {\n  constructor(args) {\n    this.instruction = 0;\n    this.data = args.data;\n    this.isMutable = args.isMutable;\n  }\n\n}\n\nclass UpdateMetadataArgs {\n  constructor(args) {\n    this.instruction = 1;\n    this.data = args.data ? args.data : null;\n    this.updateAuthority = args.updateAuthority ? args.updateAuthority : null;\n    this.primarySaleHappened = args.primarySaleHappened;\n  }\n\n}\n\nclass CreateMasterEditionArgs {\n  constructor(args) {\n    this.instruction = 10;\n    this.maxSupply = args.maxSupply;\n  }\n\n}\n\nclass MintPrintingTokensArgs {\n  constructor(args) {\n    this.instruction = 9;\n    this.supply = args.supply;\n  }\n\n}\n\nexports.METADATA_SCHEMA = new Map([[CreateMetadataArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['data', Data], ['isMutable', 'u8'] // bool\n  ]\n}], [UpdateMetadataArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['data', {\n    kind: 'option',\n    type: Data\n  }], ['updateAuthority', {\n    kind: 'option',\n    type: 'pubkeyAsString'\n  }], ['primarySaleHappened', {\n    kind: 'option',\n    type: 'u8'\n  }]]\n}], [CreateMasterEditionArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['maxSupply', {\n    kind: 'option',\n    type: 'u64'\n  }]]\n}], [MintPrintingTokensArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['supply', 'u64']]\n}], [MasterEditionV1, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['supply', 'u64'], ['maxSupply', {\n    kind: 'option',\n    type: 'u64'\n  }], ['printingMint', 'pubkeyAsString'], ['oneTimePrintingAuthorizationMint', 'pubkeyAsString']]\n}], [MasterEditionV2, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['supply', 'u64'], ['maxSupply', {\n    kind: 'option',\n    type: 'u64'\n  }]]\n}], [Edition, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['parent', 'pubkeyAsString'], ['edition', 'u64']]\n}], [Data, {\n  kind: 'struct',\n  fields: [['name', 'string'], ['symbol', 'string'], ['uri', 'string'], ['sellerFeeBasisPoints', 'u16'], ['creators', {\n    kind: 'option',\n    type: [Creator]\n  }]]\n}], [Creator, {\n  kind: 'struct',\n  fields: [['address', 'pubkeyAsString'], ['verified', 'u8'], ['share', 'u8']]\n}], [Metadata, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['updateAuthority', 'pubkeyAsString'], ['mint', 'pubkeyAsString'], ['data', Data], ['primarySaleHappened', 'u8'], ['isMutable', 'u8'], ['editionNonce', {\n    kind: 'option',\n    type: 'u8'\n  }]]\n}], [EditionMarker, {\n  kind: 'struct',\n  fields: [['key', 'u8'], ['ledger', [31]]]\n}]]); // eslint-disable-next-line no-control-regex\n\nconst METADATA_REPLACE = new RegExp('\\u0000', 'g');\n\nconst decodeMetadata = buffer => {\n  const metadata = borsh_1.deserializeUnchecked(exports.METADATA_SCHEMA, Metadata, buffer);\n  metadata.data.name = metadata.data.name.replace(METADATA_REPLACE, '');\n  metadata.data.uri = metadata.data.uri.replace(METADATA_REPLACE, '');\n  metadata.data.symbol = metadata.data.symbol.replace(METADATA_REPLACE, '');\n  return metadata;\n};\n\nexports.decodeMetadata = decodeMetadata;\n\nconst decodeEditionMarker = buffer => {\n  const editionMarker = borsh_1.deserializeUnchecked(exports.METADATA_SCHEMA, EditionMarker, buffer);\n  return editionMarker;\n};\n\nexports.decodeEditionMarker = decodeEditionMarker;\n\nconst decodeEdition = buffer => {\n  return borsh_1.deserializeUnchecked(exports.METADATA_SCHEMA, Edition, buffer);\n};\n\nexports.decodeEdition = decodeEdition;\n\nconst decodeMasterEdition = buffer => {\n  if (buffer[0] == MetadataKey.MasterEditionV1) {\n    return borsh_1.deserializeUnchecked(exports.METADATA_SCHEMA, MasterEditionV1, buffer);\n  } else {\n    return borsh_1.deserializeUnchecked(exports.METADATA_SCHEMA, MasterEditionV2, buffer);\n  }\n};\n\nexports.decodeMasterEdition = decodeMasterEdition;\n\nasync function updateMetadata(data, newUpdateAuthority, primarySaleHappened, mintKey, updateAuthority, instructions, metadataAccount) {\n  const metadataProgramId = programIds_1.programIds().metadata;\n  metadataAccount = metadataAccount || (await utils_1.findProgramAddress([Buffer.from('metadata'), utils_1.toPublicKey(metadataProgramId).toBuffer(), utils_1.toPublicKey(mintKey).toBuffer()], utils_1.toPublicKey(metadataProgramId)))[0];\n  const value = new UpdateMetadataArgs({\n    data,\n    updateAuthority: !newUpdateAuthority ? undefined : newUpdateAuthority,\n    primarySaleHappened: primarySaleHappened === null || primarySaleHappened === undefined ? null : primarySaleHappened\n  });\n  const txnData = Buffer.from(borsh_1.serialize(exports.METADATA_SCHEMA, value));\n  const keys = [{\n    pubkey: utils_1.toPublicKey(metadataAccount),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(updateAuthority),\n    isSigner: true,\n    isWritable: false\n  }];\n  instructions.push(new web3_js_1.TransactionInstruction({\n    keys,\n    programId: utils_1.toPublicKey(metadataProgramId),\n    data: txnData\n  }));\n  return metadataAccount;\n}\n\nexports.updateMetadata = updateMetadata;\n\nasync function createMetadata(data, updateAuthority, mintKey, mintAuthorityKey, instructions, payer) {\n  const metadataProgramId = programIds_1.programIds().metadata;\n  const metadataAccount = (await utils_1.findProgramAddress([Buffer.from('metadata'), utils_1.toPublicKey(metadataProgramId).toBuffer(), utils_1.toPublicKey(mintKey).toBuffer()], utils_1.toPublicKey(metadataProgramId)))[0];\n  console.log('Data', data);\n  const value = new CreateMetadataArgs({\n    data,\n    isMutable: true\n  });\n  const txnData = Buffer.from(borsh_1.serialize(exports.METADATA_SCHEMA, value));\n  const keys = [{\n    pubkey: utils_1.toPublicKey(metadataAccount),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(mintKey),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(mintAuthorityKey),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(payer),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(updateAuthority),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: web3_js_1.SystemProgram.programId,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\n    isSigner: false,\n    isWritable: false\n  }];\n  instructions.push(new web3_js_1.TransactionInstruction({\n    keys,\n    programId: utils_1.toPublicKey(metadataProgramId),\n    data: txnData\n  }));\n  return metadataAccount;\n}\n\nexports.createMetadata = createMetadata;\n\nasync function createMasterEdition(maxSupply, mintKey, updateAuthorityKey, mintAuthorityKey, payer, instructions) {\n  const metadataProgramId = programIds_1.programIds().metadata;\n  const metadataAccount = (await utils_1.findProgramAddress([Buffer.from(exports.METADATA_PREFIX), utils_1.toPublicKey(metadataProgramId).toBuffer(), utils_1.toPublicKey(mintKey).toBuffer()], utils_1.toPublicKey(metadataProgramId)))[0];\n  const editionAccount = (await utils_1.findProgramAddress([Buffer.from(exports.METADATA_PREFIX), utils_1.toPublicKey(metadataProgramId).toBuffer(), utils_1.toPublicKey(mintKey).toBuffer(), Buffer.from(exports.EDITION)], utils_1.toPublicKey(metadataProgramId)))[0];\n  const value = new CreateMasterEditionArgs({\n    maxSupply: maxSupply || null\n  });\n  const data = Buffer.from(borsh_1.serialize(exports.METADATA_SCHEMA, value));\n  const keys = [{\n    pubkey: utils_1.toPublicKey(editionAccount),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(mintKey),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(updateAuthorityKey),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(mintAuthorityKey),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(payer),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(metadataAccount),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: programIds_1.programIds().token,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: web3_js_1.SystemProgram.programId,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\n    isSigner: false,\n    isWritable: false\n  }];\n  instructions.push(new web3_js_1.TransactionInstruction({\n    keys,\n    programId: utils_1.toPublicKey(metadataProgramId),\n    data\n  }));\n}\n\nexports.createMasterEdition = createMasterEdition;\n\nasync function deprecatedMintNewEditionFromMasterEditionViaPrintingToken(newMint, tokenMint, newMintAuthority, printingMint, authorizationTokenHoldingAccount, burnAuthority, updateAuthorityOfMaster, reservationList, instructions, payer) {\n  const metadataProgramId = programIds_1.programIds().metadata;\n  const newMetadataKey = await getMetadata(newMint);\n  const masterMetadataKey = await getMetadata(tokenMint);\n  const newEdition = await getEdition(newMint);\n  const masterEdition = await getEdition(tokenMint);\n  const data = Buffer.from([3]);\n  const keys = [{\n    pubkey: utils_1.toPublicKey(newMetadataKey),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(newEdition),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(masterEdition),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(newMint),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(newMintAuthority),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(printingMint),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(authorizationTokenHoldingAccount),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(burnAuthority),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(payer),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(updateAuthorityOfMaster),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(masterMetadataKey),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: programIds_1.programIds().token,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: web3_js_1.SystemProgram.programId,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\n    isSigner: false,\n    isWritable: false\n  }];\n\n  if (reservationList) {\n    keys.push({\n      pubkey: utils_1.toPublicKey(reservationList),\n      isSigner: false,\n      isWritable: true\n    });\n  }\n\n  instructions.push(new web3_js_1.TransactionInstruction({\n    keys,\n    programId: utils_1.toPublicKey(metadataProgramId),\n    data\n  }));\n}\n\nexports.deprecatedMintNewEditionFromMasterEditionViaPrintingToken = deprecatedMintNewEditionFromMasterEditionViaPrintingToken;\n\nasync function mintNewEditionFromMasterEditionViaToken(newMint, tokenMint, newMintAuthority, newUpdateAuthority, tokenOwner, tokenAccount, instructions, payer, edition) {\n  const metadataProgramId = programIds_1.programIds().metadata;\n  const newMetadataKey = await getMetadata(newMint);\n  const masterMetadataKey = await getMetadata(tokenMint);\n  const newEdition = await getEdition(newMint);\n  const masterEdition = await getEdition(tokenMint);\n  const editionMarkPda = await getEditionMarkPda(tokenMint, edition);\n  const data = Buffer.from([11, ...edition.toArray('le', 8)]);\n  const keys = [{\n    pubkey: utils_1.toPublicKey(newMetadataKey),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(newEdition),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(masterEdition),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(newMint),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(editionMarkPda),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(newMintAuthority),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(payer),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(tokenOwner),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(tokenAccount),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(newUpdateAuthority),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(masterMetadataKey),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: programIds_1.programIds().token,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: web3_js_1.SystemProgram.programId,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\n    isSigner: false,\n    isWritable: false\n  }];\n  instructions.push(new web3_js_1.TransactionInstruction({\n    keys,\n    programId: utils_1.toPublicKey(metadataProgramId),\n    data\n  }));\n}\n\nexports.mintNewEditionFromMasterEditionViaToken = mintNewEditionFromMasterEditionViaToken;\n\nasync function updatePrimarySaleHappenedViaToken(metadata, owner, tokenAccount, instructions) {\n  const metadataProgramId = programIds_1.programIds().metadata;\n  const data = Buffer.from([4]);\n  const keys = [{\n    pubkey: utils_1.toPublicKey(metadata),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(owner),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(tokenAccount),\n    isSigner: false,\n    isWritable: false\n  }];\n  instructions.push(new web3_js_1.TransactionInstruction({\n    keys,\n    programId: utils_1.toPublicKey(metadataProgramId),\n    data\n  }));\n}\n\nexports.updatePrimarySaleHappenedViaToken = updatePrimarySaleHappenedViaToken;\n\nasync function deprecatedCreateReservationList(metadata, masterEdition, resource, updateAuthority, payer, instructions) {\n  const metadataProgramId = programIds_1.programIds().metadata;\n  const reservationList = await deprecatedGetReservationList(masterEdition, resource);\n  const data = Buffer.from([6]);\n  const keys = [{\n    pubkey: utils_1.toPublicKey(reservationList),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(payer),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(updateAuthority),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(masterEdition),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(resource),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(metadata),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: web3_js_1.SystemProgram.programId,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\n    isSigner: false,\n    isWritable: false\n  }];\n  instructions.push(new web3_js_1.TransactionInstruction({\n    keys,\n    programId: utils_1.toPublicKey(metadataProgramId),\n    data\n  }));\n}\n\nexports.deprecatedCreateReservationList = deprecatedCreateReservationList;\n\nasync function signMetadata(metadata, creator, instructions) {\n  const metadataProgramId = programIds_1.programIds().metadata;\n  const data = Buffer.from([7]);\n  const keys = [{\n    pubkey: utils_1.toPublicKey(metadata),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(creator),\n    isSigner: true,\n    isWritable: false\n  }];\n  instructions.push(new web3_js_1.TransactionInstruction({\n    keys,\n    programId: utils_1.toPublicKey(metadataProgramId),\n    data\n  }));\n}\n\nexports.signMetadata = signMetadata;\n\nasync function deprecatedMintPrintingTokens(destination, printingMint, updateAuthority, metadata, masterEdition, supply, instructions) {\n  const PROGRAM_IDS = programIds_1.programIds();\n  const metadataProgramId = PROGRAM_IDS.metadata;\n  const value = new MintPrintingTokensArgs({\n    supply\n  });\n  const data = Buffer.from(borsh_1.serialize(exports.METADATA_SCHEMA, value));\n  const keys = [{\n    pubkey: utils_1.toPublicKey(destination),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(printingMint),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(updateAuthority),\n    isSigner: true,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(metadata),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: utils_1.toPublicKey(masterEdition),\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: PROGRAM_IDS.token,\n    isSigner: false,\n    isWritable: false\n  }, {\n    pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\n    isSigner: false,\n    isWritable: false\n  }];\n  instructions.push(new web3_js_1.TransactionInstruction({\n    keys,\n    programId: utils_1.toPublicKey(metadataProgramId),\n    data\n  }));\n}\n\nexports.deprecatedMintPrintingTokens = deprecatedMintPrintingTokens;\n\nasync function convertMasterEditionV1ToV2(masterEdition, oneTimeAuthMint, printingMint, instructions) {\n  const metadataProgramId = programIds_1.programIds().metadata;\n  const data = Buffer.from([12]);\n  const keys = [{\n    pubkey: utils_1.toPublicKey(masterEdition),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(oneTimeAuthMint),\n    isSigner: false,\n    isWritable: true\n  }, {\n    pubkey: utils_1.toPublicKey(printingMint),\n    isSigner: false,\n    isWritable: true\n  }];\n  instructions.push(new web3_js_1.TransactionInstruction({\n    keys,\n    programId: utils_1.toPublicKey(metadataProgramId),\n    data\n  }));\n}\n\nexports.convertMasterEditionV1ToV2 = convertMasterEditionV1ToV2;\n\nasync function getEdition(tokenMint) {\n  const PROGRAM_IDS = programIds_1.programIds();\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METADATA_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.metadata).toBuffer(), utils_1.toPublicKey(tokenMint).toBuffer(), Buffer.from(exports.EDITION)], utils_1.toPublicKey(PROGRAM_IDS.metadata)))[0];\n}\n\nexports.getEdition = getEdition;\n\nasync function getMetadata(tokenMint) {\n  const PROGRAM_IDS = programIds_1.programIds();\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METADATA_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.metadata).toBuffer(), utils_1.toPublicKey(tokenMint).toBuffer()], utils_1.toPublicKey(PROGRAM_IDS.metadata)))[0];\n}\n\nexports.getMetadata = getMetadata;\n\nasync function deprecatedGetReservationList(masterEdition, resource) {\n  const PROGRAM_IDS = programIds_1.programIds();\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METADATA_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.metadata).toBuffer(), utils_1.toPublicKey(masterEdition).toBuffer(), Buffer.from(exports.RESERVATION), utils_1.toPublicKey(resource).toBuffer()], utils_1.toPublicKey(PROGRAM_IDS.metadata)))[0];\n}\n\nexports.deprecatedGetReservationList = deprecatedGetReservationList;\n\nasync function getEditionMarkPda(mint, edition) {\n  const PROGRAM_IDS = programIds_1.programIds();\n  const editionNumber = Math.floor(edition.toNumber() / 248);\n  return (await utils_1.findProgramAddress([Buffer.from(exports.METADATA_PREFIX), utils_1.toPublicKey(PROGRAM_IDS.metadata).toBuffer(), utils_1.toPublicKey(mint).toBuffer(), Buffer.from(exports.EDITION), Buffer.from(editionNumber.toString())], utils_1.toPublicKey(PROGRAM_IDS.metadata)))[0];\n}\n\nexports.getEditionMarkPda = getEditionMarkPda;","map":{"version":3,"sources":["../../../src/actions/metadata.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getEditionMarkPda = exports.deprecatedGetReservationList = exports.getMetadata = exports.getEdition = exports.convertMasterEditionV1ToV2 = exports.deprecatedMintPrintingTokens = exports.signMetadata = exports.deprecatedCreateReservationList = exports.updatePrimarySaleHappenedViaToken = exports.mintNewEditionFromMasterEditionViaToken = exports.deprecatedMintNewEditionFromMasterEditionViaPrintingToken = exports.createMasterEdition = exports.createMetadata = exports.updateMetadata = exports.decodeMasterEdition = exports.decodeEdition = exports.decodeEditionMarker = exports.decodeMetadata = exports.METADATA_SCHEMA = exports.Metadata = exports.Data = exports.Creator = exports.Edition = exports.EditionMarker = exports.MasterEditionV2 = exports.MasterEditionV1 = exports.MetadataCategory = exports.MetadataKey = exports.EDITION_MARKER_BIT_SIZE = exports.MAX_EDITION_LEN = exports.MAX_METADATA_LEN = exports.MAX_CREATOR_LEN = exports.MAX_CREATOR_LIMIT = exports.MAX_URI_LENGTH = exports.MAX_SYMBOL_LENGTH = exports.MAX_NAME_LENGTH = exports.RESERVATION = exports.EDITION = exports.METADATA_PREFIX = void 0;\r\nconst web3_js_1 = require(\"@solana/web3.js\");\r\nconst programIds_1 = require(\"../utils/programIds\");\r\nconst borsh_1 = require(\"borsh\");\r\nconst utils_1 = require(\"../utils\");\r\nexports.METADATA_PREFIX = 'metadata';\r\nexports.EDITION = 'edition';\r\nexports.RESERVATION = 'reservation';\r\nexports.MAX_NAME_LENGTH = 32;\r\nexports.MAX_SYMBOL_LENGTH = 10;\r\nexports.MAX_URI_LENGTH = 200;\r\nexports.MAX_CREATOR_LIMIT = 5;\r\nexports.MAX_CREATOR_LEN = 32 + 1 + 1;\r\nexports.MAX_METADATA_LEN = 1 +\r\n    32 +\r\n    32 +\r\n    exports.MAX_NAME_LENGTH +\r\n    exports.MAX_SYMBOL_LENGTH +\r\n    exports.MAX_URI_LENGTH +\r\n    exports.MAX_CREATOR_LIMIT * exports.MAX_CREATOR_LEN +\r\n    2 +\r\n    1 +\r\n    1 +\r\n    198;\r\nexports.MAX_EDITION_LEN = 1 + 32 + 8 + 200;\r\nexports.EDITION_MARKER_BIT_SIZE = 248;\r\nvar MetadataKey;\r\n(function (MetadataKey) {\r\n    MetadataKey[MetadataKey[\"Uninitialized\"] = 0] = \"Uninitialized\";\r\n    MetadataKey[MetadataKey[\"MetadataV1\"] = 4] = \"MetadataV1\";\r\n    MetadataKey[MetadataKey[\"EditionV1\"] = 1] = \"EditionV1\";\r\n    MetadataKey[MetadataKey[\"MasterEditionV1\"] = 2] = \"MasterEditionV1\";\r\n    MetadataKey[MetadataKey[\"MasterEditionV2\"] = 6] = \"MasterEditionV2\";\r\n    MetadataKey[MetadataKey[\"EditionMarker\"] = 7] = \"EditionMarker\";\r\n})(MetadataKey = exports.MetadataKey || (exports.MetadataKey = {}));\r\nvar MetadataCategory;\r\n(function (MetadataCategory) {\r\n    MetadataCategory[\"Audio\"] = \"audio\";\r\n    MetadataCategory[\"Video\"] = \"video\";\r\n    MetadataCategory[\"Image\"] = \"image\";\r\n    MetadataCategory[\"VR\"] = \"vr\";\r\n    MetadataCategory[\"HTML\"] = \"html\";\r\n})(MetadataCategory = exports.MetadataCategory || (exports.MetadataCategory = {}));\r\nclass MasterEditionV1 {\r\n    constructor(args) {\r\n        this.key = MetadataKey.MasterEditionV1;\r\n        this.supply = args.supply;\r\n        this.maxSupply = args.maxSupply;\r\n        this.printingMint = args.printingMint;\r\n        this.oneTimePrintingAuthorizationMint =\r\n            args.oneTimePrintingAuthorizationMint;\r\n    }\r\n}\r\nexports.MasterEditionV1 = MasterEditionV1;\r\nclass MasterEditionV2 {\r\n    constructor(args) {\r\n        this.key = MetadataKey.MasterEditionV2;\r\n        this.supply = args.supply;\r\n        this.maxSupply = args.maxSupply;\r\n    }\r\n}\r\nexports.MasterEditionV2 = MasterEditionV2;\r\nclass EditionMarker {\r\n    constructor(args) {\r\n        this.key = MetadataKey.EditionMarker;\r\n        this.ledger = args.ledger;\r\n    }\r\n    editionTaken(edition) {\r\n        const editionOffset = edition % exports.EDITION_MARKER_BIT_SIZE;\r\n        const indexOffset = Math.floor(editionOffset / 8);\r\n        if (indexOffset > 30) {\r\n            throw Error('bad index for edition');\r\n        }\r\n        const positionInBitsetFromRight = 7 - (editionOffset % 8);\r\n        const mask = Math.pow(2, positionInBitsetFromRight);\r\n        const appliedMask = this.ledger[indexOffset] & mask;\r\n        return appliedMask != 0;\r\n    }\r\n}\r\nexports.EditionMarker = EditionMarker;\r\nclass Edition {\r\n    constructor(args) {\r\n        this.key = MetadataKey.EditionV1;\r\n        this.parent = args.parent;\r\n        this.edition = args.edition;\r\n    }\r\n}\r\nexports.Edition = Edition;\r\nclass Creator {\r\n    constructor(args) {\r\n        this.address = args.address;\r\n        this.verified = args.verified;\r\n        this.share = args.share;\r\n    }\r\n}\r\nexports.Creator = Creator;\r\nclass Data {\r\n    constructor(args) {\r\n        this.name = args.name;\r\n        this.symbol = args.symbol;\r\n        this.uri = args.uri;\r\n        this.sellerFeeBasisPoints = args.sellerFeeBasisPoints;\r\n        this.creators = args.creators;\r\n    }\r\n}\r\nexports.Data = Data;\r\nclass Metadata {\r\n    constructor(args) {\r\n        var _a;\r\n        this.key = MetadataKey.MetadataV1;\r\n        this.updateAuthority = args.updateAuthority;\r\n        this.mint = args.mint;\r\n        this.data = args.data;\r\n        this.primarySaleHappened = args.primarySaleHappened;\r\n        this.isMutable = args.isMutable;\r\n        this.editionNonce = (_a = args.editionNonce) !== null && _a !== void 0 ? _a : null;\r\n    }\r\n    async init() {\r\n        //const metadata = toPublicKey(programIds().metadata);\r\n        /*\r\n        This nonce stuff doesnt work - we are doing something wrong here. TODO fix.\r\n        if (this.editionNonce !== null) {\r\n          this.edition = (\r\n            await PublicKey.createProgramAddress(\r\n              [\r\n                Buffer.from(METADATA_PREFIX),\r\n                metadata.toBuffer(),\r\n                toPublicKey(this.mint).toBuffer(),\r\n                new Uint8Array([this.editionNonce || 0]),\r\n              ],\r\n              metadata,\r\n            )\r\n          ).toBase58();\r\n        } else {*/\r\n        this.edition = await getEdition(this.mint);\r\n        //}\r\n        this.masterEdition = this.edition;\r\n    }\r\n}\r\nexports.Metadata = Metadata;\r\nclass CreateMetadataArgs {\r\n    constructor(args) {\r\n        this.instruction = 0;\r\n        this.data = args.data;\r\n        this.isMutable = args.isMutable;\r\n    }\r\n}\r\nclass UpdateMetadataArgs {\r\n    constructor(args) {\r\n        this.instruction = 1;\r\n        this.data = args.data ? args.data : null;\r\n        this.updateAuthority = args.updateAuthority ? args.updateAuthority : null;\r\n        this.primarySaleHappened = args.primarySaleHappened;\r\n    }\r\n}\r\nclass CreateMasterEditionArgs {\r\n    constructor(args) {\r\n        this.instruction = 10;\r\n        this.maxSupply = args.maxSupply;\r\n    }\r\n}\r\nclass MintPrintingTokensArgs {\r\n    constructor(args) {\r\n        this.instruction = 9;\r\n        this.supply = args.supply;\r\n    }\r\n}\r\nexports.METADATA_SCHEMA = new Map([\r\n    [\r\n        CreateMetadataArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['data', Data],\r\n                ['isMutable', 'u8'], // bool\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        UpdateMetadataArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['data', { kind: 'option', type: Data }],\r\n                ['updateAuthority', { kind: 'option', type: 'pubkeyAsString' }],\r\n                ['primarySaleHappened', { kind: 'option', type: 'u8' }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        CreateMasterEditionArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['maxSupply', { kind: 'option', type: 'u64' }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        MintPrintingTokensArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['supply', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        MasterEditionV1,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['supply', 'u64'],\r\n                ['maxSupply', { kind: 'option', type: 'u64' }],\r\n                ['printingMint', 'pubkeyAsString'],\r\n                ['oneTimePrintingAuthorizationMint', 'pubkeyAsString'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        MasterEditionV2,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['supply', 'u64'],\r\n                ['maxSupply', { kind: 'option', type: 'u64' }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        Edition,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['parent', 'pubkeyAsString'],\r\n                ['edition', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        Data,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['name', 'string'],\r\n                ['symbol', 'string'],\r\n                ['uri', 'string'],\r\n                ['sellerFeeBasisPoints', 'u16'],\r\n                ['creators', { kind: 'option', type: [Creator] }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        Creator,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['address', 'pubkeyAsString'],\r\n                ['verified', 'u8'],\r\n                ['share', 'u8'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        Metadata,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['updateAuthority', 'pubkeyAsString'],\r\n                ['mint', 'pubkeyAsString'],\r\n                ['data', Data],\r\n                ['primarySaleHappened', 'u8'],\r\n                ['isMutable', 'u8'],\r\n                ['editionNonce', { kind: 'option', type: 'u8' }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        EditionMarker,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'u8'],\r\n                ['ledger', [31]],\r\n            ],\r\n        },\r\n    ],\r\n]);\r\n// eslint-disable-next-line no-control-regex\r\nconst METADATA_REPLACE = new RegExp('\\u0000', 'g');\r\nconst decodeMetadata = (buffer) => {\r\n    const metadata = borsh_1.deserializeUnchecked(exports.METADATA_SCHEMA, Metadata, buffer);\r\n    metadata.data.name = metadata.data.name.replace(METADATA_REPLACE, '');\r\n    metadata.data.uri = metadata.data.uri.replace(METADATA_REPLACE, '');\r\n    metadata.data.symbol = metadata.data.symbol.replace(METADATA_REPLACE, '');\r\n    return metadata;\r\n};\r\nexports.decodeMetadata = decodeMetadata;\r\nconst decodeEditionMarker = (buffer) => {\r\n    const editionMarker = borsh_1.deserializeUnchecked(exports.METADATA_SCHEMA, EditionMarker, buffer);\r\n    return editionMarker;\r\n};\r\nexports.decodeEditionMarker = decodeEditionMarker;\r\nconst decodeEdition = (buffer) => {\r\n    return borsh_1.deserializeUnchecked(exports.METADATA_SCHEMA, Edition, buffer);\r\n};\r\nexports.decodeEdition = decodeEdition;\r\nconst decodeMasterEdition = (buffer) => {\r\n    if (buffer[0] == MetadataKey.MasterEditionV1) {\r\n        return borsh_1.deserializeUnchecked(exports.METADATA_SCHEMA, MasterEditionV1, buffer);\r\n    }\r\n    else {\r\n        return borsh_1.deserializeUnchecked(exports.METADATA_SCHEMA, MasterEditionV2, buffer);\r\n    }\r\n};\r\nexports.decodeMasterEdition = decodeMasterEdition;\r\nasync function updateMetadata(data, newUpdateAuthority, primarySaleHappened, mintKey, updateAuthority, instructions, metadataAccount) {\r\n    const metadataProgramId = programIds_1.programIds().metadata;\r\n    metadataAccount =\r\n        metadataAccount ||\r\n            (await utils_1.findProgramAddress([\r\n                Buffer.from('metadata'),\r\n                utils_1.toPublicKey(metadataProgramId).toBuffer(),\r\n                utils_1.toPublicKey(mintKey).toBuffer(),\r\n            ], utils_1.toPublicKey(metadataProgramId)))[0];\r\n    const value = new UpdateMetadataArgs({\r\n        data,\r\n        updateAuthority: !newUpdateAuthority ? undefined : newUpdateAuthority,\r\n        primarySaleHappened: primarySaleHappened === null || primarySaleHappened === undefined\r\n            ? null\r\n            : primarySaleHappened,\r\n    });\r\n    const txnData = Buffer.from(borsh_1.serialize(exports.METADATA_SCHEMA, value));\r\n    const keys = [\r\n        {\r\n            pubkey: utils_1.toPublicKey(metadataAccount),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(updateAuthority),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: utils_1.toPublicKey(metadataProgramId),\r\n        data: txnData,\r\n    }));\r\n    return metadataAccount;\r\n}\r\nexports.updateMetadata = updateMetadata;\r\nasync function createMetadata(data, updateAuthority, mintKey, mintAuthorityKey, instructions, payer) {\r\n    const metadataProgramId = programIds_1.programIds().metadata;\r\n    const metadataAccount = (await utils_1.findProgramAddress([\r\n        Buffer.from('metadata'),\r\n        utils_1.toPublicKey(metadataProgramId).toBuffer(),\r\n        utils_1.toPublicKey(mintKey).toBuffer(),\r\n    ], utils_1.toPublicKey(metadataProgramId)))[0];\r\n    console.log('Data', data);\r\n    const value = new CreateMetadataArgs({ data, isMutable: true });\r\n    const txnData = Buffer.from(borsh_1.serialize(exports.METADATA_SCHEMA, value));\r\n    const keys = [\r\n        {\r\n            pubkey: utils_1.toPublicKey(metadataAccount),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(mintKey),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(mintAuthorityKey),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(payer),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(updateAuthority),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SystemProgram.programId,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: utils_1.toPublicKey(metadataProgramId),\r\n        data: txnData,\r\n    }));\r\n    return metadataAccount;\r\n}\r\nexports.createMetadata = createMetadata;\r\nasync function createMasterEdition(maxSupply, mintKey, updateAuthorityKey, mintAuthorityKey, payer, instructions) {\r\n    const metadataProgramId = programIds_1.programIds().metadata;\r\n    const metadataAccount = (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METADATA_PREFIX),\r\n        utils_1.toPublicKey(metadataProgramId).toBuffer(),\r\n        utils_1.toPublicKey(mintKey).toBuffer(),\r\n    ], utils_1.toPublicKey(metadataProgramId)))[0];\r\n    const editionAccount = (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METADATA_PREFIX),\r\n        utils_1.toPublicKey(metadataProgramId).toBuffer(),\r\n        utils_1.toPublicKey(mintKey).toBuffer(),\r\n        Buffer.from(exports.EDITION),\r\n    ], utils_1.toPublicKey(metadataProgramId)))[0];\r\n    const value = new CreateMasterEditionArgs({ maxSupply: maxSupply || null });\r\n    const data = Buffer.from(borsh_1.serialize(exports.METADATA_SCHEMA, value));\r\n    const keys = [\r\n        {\r\n            pubkey: utils_1.toPublicKey(editionAccount),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(mintKey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(updateAuthorityKey),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(mintAuthorityKey),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(payer),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(metadataAccount),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: programIds_1.programIds().token,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SystemProgram.programId,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: utils_1.toPublicKey(metadataProgramId),\r\n        data,\r\n    }));\r\n}\r\nexports.createMasterEdition = createMasterEdition;\r\nasync function deprecatedMintNewEditionFromMasterEditionViaPrintingToken(newMint, tokenMint, newMintAuthority, printingMint, authorizationTokenHoldingAccount, burnAuthority, updateAuthorityOfMaster, reservationList, instructions, payer) {\r\n    const metadataProgramId = programIds_1.programIds().metadata;\r\n    const newMetadataKey = await getMetadata(newMint);\r\n    const masterMetadataKey = await getMetadata(tokenMint);\r\n    const newEdition = await getEdition(newMint);\r\n    const masterEdition = await getEdition(tokenMint);\r\n    const data = Buffer.from([3]);\r\n    const keys = [\r\n        {\r\n            pubkey: utils_1.toPublicKey(newMetadataKey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(newEdition),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(masterEdition),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(newMint),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(newMintAuthority),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(printingMint),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(authorizationTokenHoldingAccount),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(burnAuthority),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(payer),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(updateAuthorityOfMaster),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(masterMetadataKey),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: programIds_1.programIds().token,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SystemProgram.programId,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    if (reservationList) {\r\n        keys.push({\r\n            pubkey: utils_1.toPublicKey(reservationList),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        });\r\n    }\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: utils_1.toPublicKey(metadataProgramId),\r\n        data,\r\n    }));\r\n}\r\nexports.deprecatedMintNewEditionFromMasterEditionViaPrintingToken = deprecatedMintNewEditionFromMasterEditionViaPrintingToken;\r\nasync function mintNewEditionFromMasterEditionViaToken(newMint, tokenMint, newMintAuthority, newUpdateAuthority, tokenOwner, tokenAccount, instructions, payer, edition) {\r\n    const metadataProgramId = programIds_1.programIds().metadata;\r\n    const newMetadataKey = await getMetadata(newMint);\r\n    const masterMetadataKey = await getMetadata(tokenMint);\r\n    const newEdition = await getEdition(newMint);\r\n    const masterEdition = await getEdition(tokenMint);\r\n    const editionMarkPda = await getEditionMarkPda(tokenMint, edition);\r\n    const data = Buffer.from([11, ...edition.toArray('le', 8)]);\r\n    const keys = [\r\n        {\r\n            pubkey: utils_1.toPublicKey(newMetadataKey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(newEdition),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(masterEdition),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(newMint),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(editionMarkPda),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(newMintAuthority),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(payer),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(tokenOwner),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(tokenAccount),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(newUpdateAuthority),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(masterMetadataKey),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: programIds_1.programIds().token,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SystemProgram.programId,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: utils_1.toPublicKey(metadataProgramId),\r\n        data,\r\n    }));\r\n}\r\nexports.mintNewEditionFromMasterEditionViaToken = mintNewEditionFromMasterEditionViaToken;\r\nasync function updatePrimarySaleHappenedViaToken(metadata, owner, tokenAccount, instructions) {\r\n    const metadataProgramId = programIds_1.programIds().metadata;\r\n    const data = Buffer.from([4]);\r\n    const keys = [\r\n        {\r\n            pubkey: utils_1.toPublicKey(metadata),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(owner),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(tokenAccount),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: utils_1.toPublicKey(metadataProgramId),\r\n        data,\r\n    }));\r\n}\r\nexports.updatePrimarySaleHappenedViaToken = updatePrimarySaleHappenedViaToken;\r\nasync function deprecatedCreateReservationList(metadata, masterEdition, resource, updateAuthority, payer, instructions) {\r\n    const metadataProgramId = programIds_1.programIds().metadata;\r\n    const reservationList = await deprecatedGetReservationList(masterEdition, resource);\r\n    const data = Buffer.from([6]);\r\n    const keys = [\r\n        {\r\n            pubkey: utils_1.toPublicKey(reservationList),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(payer),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(updateAuthority),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(masterEdition),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(resource),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(metadata),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SystemProgram.programId,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: utils_1.toPublicKey(metadataProgramId),\r\n        data,\r\n    }));\r\n}\r\nexports.deprecatedCreateReservationList = deprecatedCreateReservationList;\r\nasync function signMetadata(metadata, creator, instructions) {\r\n    const metadataProgramId = programIds_1.programIds().metadata;\r\n    const data = Buffer.from([7]);\r\n    const keys = [\r\n        {\r\n            pubkey: utils_1.toPublicKey(metadata),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(creator),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: utils_1.toPublicKey(metadataProgramId),\r\n        data,\r\n    }));\r\n}\r\nexports.signMetadata = signMetadata;\r\nasync function deprecatedMintPrintingTokens(destination, printingMint, updateAuthority, metadata, masterEdition, supply, instructions) {\r\n    const PROGRAM_IDS = programIds_1.programIds();\r\n    const metadataProgramId = PROGRAM_IDS.metadata;\r\n    const value = new MintPrintingTokensArgs({ supply });\r\n    const data = Buffer.from(borsh_1.serialize(exports.METADATA_SCHEMA, value));\r\n    const keys = [\r\n        {\r\n            pubkey: utils_1.toPublicKey(destination),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(printingMint),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(updateAuthority),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(metadata),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(masterEdition),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: PROGRAM_IDS.token,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: utils_1.toPublicKey(metadataProgramId),\r\n        data,\r\n    }));\r\n}\r\nexports.deprecatedMintPrintingTokens = deprecatedMintPrintingTokens;\r\nasync function convertMasterEditionV1ToV2(masterEdition, oneTimeAuthMint, printingMint, instructions) {\r\n    const metadataProgramId = programIds_1.programIds().metadata;\r\n    const data = Buffer.from([12]);\r\n    const keys = [\r\n        {\r\n            pubkey: utils_1.toPublicKey(masterEdition),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(oneTimeAuthMint),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: utils_1.toPublicKey(printingMint),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: utils_1.toPublicKey(metadataProgramId),\r\n        data,\r\n    }));\r\n}\r\nexports.convertMasterEditionV1ToV2 = convertMasterEditionV1ToV2;\r\nasync function getEdition(tokenMint) {\r\n    const PROGRAM_IDS = programIds_1.programIds();\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METADATA_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.metadata).toBuffer(),\r\n        utils_1.toPublicKey(tokenMint).toBuffer(),\r\n        Buffer.from(exports.EDITION),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metadata)))[0];\r\n}\r\nexports.getEdition = getEdition;\r\nasync function getMetadata(tokenMint) {\r\n    const PROGRAM_IDS = programIds_1.programIds();\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METADATA_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.metadata).toBuffer(),\r\n        utils_1.toPublicKey(tokenMint).toBuffer(),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metadata)))[0];\r\n}\r\nexports.getMetadata = getMetadata;\r\nasync function deprecatedGetReservationList(masterEdition, resource) {\r\n    const PROGRAM_IDS = programIds_1.programIds();\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METADATA_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.metadata).toBuffer(),\r\n        utils_1.toPublicKey(masterEdition).toBuffer(),\r\n        Buffer.from(exports.RESERVATION),\r\n        utils_1.toPublicKey(resource).toBuffer(),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metadata)))[0];\r\n}\r\nexports.deprecatedGetReservationList = deprecatedGetReservationList;\r\nasync function getEditionMarkPda(mint, edition) {\r\n    const PROGRAM_IDS = programIds_1.programIds();\r\n    const editionNumber = Math.floor(edition.toNumber() / 248);\r\n    return (await utils_1.findProgramAddress([\r\n        Buffer.from(exports.METADATA_PREFIX),\r\n        utils_1.toPublicKey(PROGRAM_IDS.metadata).toBuffer(),\r\n        utils_1.toPublicKey(mint).toBuffer(),\r\n        Buffer.from(exports.EDITION),\r\n        Buffer.from(editionNumber.toString()),\r\n    ], utils_1.toPublicKey(PROGRAM_IDS.metadata)))[0];\r\n}\r\nexports.getEditionMarkPda = getEditionMarkPda;\r\n//# sourceMappingURL=metadata.js.map"]},"metadata":{},"sourceType":"script"}