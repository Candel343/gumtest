{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.processAuctions = void 0;\n\nconst actions_1 = require(\"../../actions\");\n\nconst utils_1 = require(\"../../utils\");\n\nconst accounts_1 = require(\"../accounts\");\n\nconst processAuctions = ({\n  account,\n  pubkey\n}, setter) => {\n  if (!isAuctionAccount(account)) return;\n\n  try {\n    const parsedAccount = accounts_1.cache.add(pubkey, account, actions_1.AuctionParser, false);\n    setter('auctions', pubkey, parsedAccount);\n  } catch (e) {// ignore errors\n    // add type as first byte for easier deserialization\n  }\n\n  try {\n    if (isExtendedAuctionAccount(account)) {\n      const parsedAccount = accounts_1.cache.add(pubkey, account, actions_1.AuctionDataExtendedParser, false);\n      setter('auctionDataExtended', pubkey, parsedAccount);\n    }\n  } catch {// ignore errors\n    // add type as first byte for easier deserialization\n  }\n\n  try {\n    if (isBidderMetadataAccount(account)) {\n      const parsedAccount = accounts_1.cache.add(pubkey, account, actions_1.BidderMetadataParser, false);\n      setter('bidderMetadataByAuctionAndBidder', parsedAccount.info.auctionPubkey + '-' + parsedAccount.info.bidderPubkey, parsedAccount);\n    }\n  } catch {// ignore errors\n    // add type as first byte for easier deserialization\n  }\n\n  try {\n    if (isBidderPotAccount(account)) {\n      const parsedAccount = accounts_1.cache.add(pubkey, account, actions_1.BidderPotParser, false);\n      setter('bidderPotsByAuctionAndBidder', parsedAccount.info.auctionAct + '-' + parsedAccount.info.bidderAct, parsedAccount);\n    }\n  } catch {// ignore errors\n    // add type as first byte for easier deserialization\n  }\n};\n\nexports.processAuctions = processAuctions;\n\nconst isAuctionAccount = account => account && utils_1.pubkeyToString(account.owner) === utils_1.AUCTION_ID;\n\nconst isExtendedAuctionAccount = account => account.data.length === actions_1.MAX_AUCTION_DATA_EXTENDED_SIZE;\n\nconst isBidderMetadataAccount = account => account.data.length === actions_1.BIDDER_METADATA_LEN;\n\nconst isBidderPotAccount = account => account.data.length === actions_1.BIDDER_POT_LEN;","map":{"version":3,"sources":["../../../../src/contexts/meta/processAuctions.ts"],"names":[],"mappings":";;;;;;;AAAA,MAAA,SAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AAaA,MAAA,OAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AAEA,MAAA,UAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AAGO,MAAM,eAAe,GAAwB,CAClD;AAAE,EAAA,OAAF;AAAW,EAAA;AAAX,CADkD,EAElD,MAFkD,KAGhD;AACF,MAAI,CAAC,gBAAgB,CAAC,OAAD,CAArB,EAAgC;;AAEhC,MAAI;AACF,UAAM,aAAa,GAAG,UAAA,CAAA,KAAA,CAAM,GAAN,CACpB,MADoB,EAEpB,OAFoB,EAGpB,SAAA,CAAA,aAHoB,EAIpB,KAJoB,CAAtB;AAMA,IAAA,MAAM,CAAC,UAAD,EAAa,MAAb,EAAqB,aAArB,CAAN;AACD,GARD,CAQE,OAAO,CAAP,EAAU,CACV;AACA;AACD;;AAED,MAAI;AACF,QAAI,wBAAwB,CAAC,OAAD,CAA5B,EAAuC;AACrC,YAAM,aAAa,GAAG,UAAA,CAAA,KAAA,CAAM,GAAN,CACpB,MADoB,EAEpB,OAFoB,EAGpB,SAAA,CAAA,yBAHoB,EAIpB,KAJoB,CAAtB;AAMA,MAAA,MAAM,CAAC,qBAAD,EAAwB,MAAxB,EAAgC,aAAhC,CAAN;AACD;AACF,GAVD,CAUE,MAAM,CACN;AACA;AACD;;AAED,MAAI;AACF,QAAI,uBAAuB,CAAC,OAAD,CAA3B,EAAsC;AACpC,YAAM,aAAa,GAAG,UAAA,CAAA,KAAA,CAAM,GAAN,CACpB,MADoB,EAEpB,OAFoB,EAGpB,SAAA,CAAA,oBAHoB,EAIpB,KAJoB,CAAtB;AAMA,MAAA,MAAM,CACJ,kCADI,EAEJ,aAAa,CAAC,IAAd,CAAmB,aAAnB,GACE,GADF,GAEE,aAAa,CAAC,IAAd,CAAmB,YAJjB,EAKJ,aALI,CAAN;AAOD;AACF,GAhBD,CAgBE,MAAM,CACN;AACA;AACD;;AAED,MAAI;AACF,QAAI,kBAAkB,CAAC,OAAD,CAAtB,EAAiC;AAC/B,YAAM,aAAa,GAAG,UAAA,CAAA,KAAA,CAAM,GAAN,CACpB,MADoB,EAEpB,OAFoB,EAGpB,SAAA,CAAA,eAHoB,EAIpB,KAJoB,CAAtB;AAMA,MAAA,MAAM,CACJ,8BADI,EAEJ,aAAa,CAAC,IAAd,CAAmB,UAAnB,GAAgC,GAAhC,GAAsC,aAAa,CAAC,IAAd,CAAmB,SAFrD,EAGJ,aAHI,CAAN;AAKD;AACF,GAdD,CAcE,MAAM,CACN;AACA;AACD;AACF,CAzEM;;AAAM,OAAA,CAAA,eAAA,GAAe,eAAf;;AA2Eb,MAAM,gBAAgB,GAAqB,OAAO,IAChD,OAAO,IAAI,OAAA,CAAA,cAAA,CAAe,OAAO,CAAC,KAAvB,MAAkC,OAAA,CAAA,UAD/C;;AAGA,MAAM,wBAAwB,GAAqB,OAAO,IACxD,OAAO,CAAC,IAAR,CAAa,MAAb,KAAwB,SAAA,CAAA,8BAD1B;;AAGA,MAAM,uBAAuB,GAAqB,OAAO,IACvD,OAAO,CAAC,IAAR,CAAa,MAAb,KAAwB,SAAA,CAAA,mBAD1B;;AAGA,MAAM,kBAAkB,GAAqB,OAAO,IAClD,OAAO,CAAC,IAAR,CAAa,MAAb,KAAwB,SAAA,CAAA,cAD1B","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.processAuctions = void 0;\r\nconst actions_1 = require(\"../../actions\");\r\nconst utils_1 = require(\"../../utils\");\r\nconst accounts_1 = require(\"../accounts\");\r\nconst processAuctions = ({ account, pubkey }, setter) => {\r\n    if (!isAuctionAccount(account))\r\n        return;\r\n    try {\r\n        const parsedAccount = accounts_1.cache.add(pubkey, account, actions_1.AuctionParser, false);\r\n        setter('auctions', pubkey, parsedAccount);\r\n    }\r\n    catch (e) {\r\n        // ignore errors\r\n        // add type as first byte for easier deserialization\r\n    }\r\n    try {\r\n        if (isExtendedAuctionAccount(account)) {\r\n            const parsedAccount = accounts_1.cache.add(pubkey, account, actions_1.AuctionDataExtendedParser, false);\r\n            setter('auctionDataExtended', pubkey, parsedAccount);\r\n        }\r\n    }\r\n    catch {\r\n        // ignore errors\r\n        // add type as first byte for easier deserialization\r\n    }\r\n    try {\r\n        if (isBidderMetadataAccount(account)) {\r\n            const parsedAccount = accounts_1.cache.add(pubkey, account, actions_1.BidderMetadataParser, false);\r\n            setter('bidderMetadataByAuctionAndBidder', parsedAccount.info.auctionPubkey +\r\n                '-' +\r\n                parsedAccount.info.bidderPubkey, parsedAccount);\r\n        }\r\n    }\r\n    catch {\r\n        // ignore errors\r\n        // add type as first byte for easier deserialization\r\n    }\r\n    try {\r\n        if (isBidderPotAccount(account)) {\r\n            const parsedAccount = accounts_1.cache.add(pubkey, account, actions_1.BidderPotParser, false);\r\n            setter('bidderPotsByAuctionAndBidder', parsedAccount.info.auctionAct + '-' + parsedAccount.info.bidderAct, parsedAccount);\r\n        }\r\n    }\r\n    catch {\r\n        // ignore errors\r\n        // add type as first byte for easier deserialization\r\n    }\r\n};\r\nexports.processAuctions = processAuctions;\r\nconst isAuctionAccount = account => account && utils_1.pubkeyToString(account.owner) === utils_1.AUCTION_ID;\r\nconst isExtendedAuctionAccount = account => account.data.length === actions_1.MAX_AUCTION_DATA_EXTENDED_SIZE;\r\nconst isBidderMetadataAccount = account => account.data.length === actions_1.BIDDER_METADATA_LEN;\r\nconst isBidderPotAccount = account => account.data.length === actions_1.BIDDER_POT_LEN;\r\n//# sourceMappingURL=processAuctions.js.map"]},"metadata":{},"sourceType":"script"}